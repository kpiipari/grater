<!DOCTYPE html>
<!-- saved from url=(0052)https://static.foodity.com/state/0.1.6-rc.5/ext.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script>window.readcubeExtension = {
  version: '1.29',
  id: 'mfacblegickmnfpaebakfnlbfhpoegin'
};</script><title></title><script>var commService=function(){function a(a,b,c){e[a]=e[a]||[],e[a].push({source:c||null,callback:b})}function b(a,b,c,e){var c={action:b,data:c};if(e){var g=d();f[g]=e,c.callbackId=g}a.postMessage(JSON.stringify(c),"*")}function c(a){if("string"==typeof a.data){try{var b=JSON.parse(a.data)}catch(c){return}var d=b.action,g=b.callbackId,h=b.callback;if(h&&h in f)f[h](b.response),delete f[h];else if(d&&d in e)for(var i=0;i<e[d].length;i++){var j=e[d][i].source,h=e[d][i].callback;(null===j||j===a.source)&&h(b.data,function(b){var c={callback:g,response:b};a.source.postMessage(JSON.stringify(c),a.origin)})}}}function d(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+(new Date).getTime()}var e={},f={};return"addEventListener"in window?window.addEventListener("message",c,!1):window.attachEvent("onmessage",c),{registerListener:a,sendMessage:b}}();!function(a,b){function c(){u=m(w.shopperIdCookieName),b.sendMessage(parent,"cc-tp-ready",{anonymous:l(),storedState:d(),shopperIdCookie:u,trackingDisabled:t(),retailerCookieExists:!!i(),v2SingleImplicitRetailer:j()})}function d(){v=e();var a=k(v);return a&&a[x]?a[x].global||null:null}function e(){return f()||h()||g()}function f(){return m(w.stateCookieName)}function g(){return a.localStorage.getItem(w.localStorageKey)}function h(){return a.sessionStorage.getItem(w.localStorageKey)}function i(){var a=m(w.retailerCookieName);if(!a){var b=m(w.retailerChosenCookieName);b&&isNaN(b)&&(a=b,n(w.retailerCookieName,a))}return a}function j(){try{var a=k(g())||{},b=a["v1.1"].global.shopper.retailers,c=b&&b.length?b.filter(function(a){return a.confirmed||"implicit"===a.type}):[];return 1===c.length&&"implicit"===c[0].type?c[0].id:null}catch(d){return null}}function k(a){try{return JSON.parse(a)}catch(b){}return null}function l(){if(null!==B)return B;if(s())return b.sendMessage(parent,"cc-debug-log",{message:"Browser detected as Internet Explorer, shopper is therefore not anonymous"}),B=!1,!1;var a="cc-test-key",c="cc-test-value-"+(new Date).getTime(),d=new Date;return d.setMinutes(d.getMinutes()+1),document.cookie=a+"="+c+"; expires="+d.toGMTString()+"; domain="+w.cookieDomain+"; path=/",document.cookie.indexOf(a)>-1?(document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain="+w.cookieDomain+"; path=/",B=!1,!1):(B=!0,!0)}function m(a){var b=new RegExp("(?:(?:^|.*;\\s*)"+a+"\\s*\\=\\s*([^;]*).*$)|^.*$"),c=document.cookie.replace(b,"$1");return c||null}function n(a,b,c){c=c||w.cookiePath;var d=new Date;d.setFullYear(d.getFullYear()+10),document.cookie=a+"="+b+"; expires="+d.toGMTString()+"; max-age=315569260; domain="+w.cookieDomain+"; path="+c+";"}function o(a,b){!A&&q()?z=!0:(n(w.shopperIdCookieName,a.shopperId,"/"),b())}function p(a,b){document.cookie=w.shopperIdCookieName+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+w.cookieDomain+";",b()}function q(){return currentShopperId=m(w.shopperIdCookieName),currentShopperId!==u?!0:!1}function r(b,c){a.localStorage.removeItem(w.localStorageKey),a.sessionStorage.removeItem(w.localStorageKey),document.cookie=w.stateCookieName+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path="+w.cookiePath+"; domain="+w.cookieDomain+";"}function s(){return a.navigator.userAgent.indexOf("MSIE ")>0||a.navigator.userAgent.indexOf("Trident/")>0}function t(){return document.cookie.indexOf(w.trackingDisabledCookieName)>-1}var u,v,w={version:"1",shopperIdCookieName:"cc_hash",stateCookieName:"cc_state",retailerCookieName:"last_retailer",retailerChosenCookieName:"last_chosen_retailer",cookieDomain:".foodity.com",cookiePath:"/",localStorageKey:"$cc",trackingDisabledCookieName:"trackingDisabled"},x="v"+w.version,y=!1,z=!1,A=!1,B=null;this.setStoredState=function(c,d){var e=f(),i=h(),j=g(),m=e||i||j;if(z||!A&&m!==v)return void b.sendMessage(parent,"cc-unexpected-state-change");var o=k(m)||{};o[x]={global:c};var p=JSON.stringify(o);if(l()||e||i){y||(y=!0,b.sendMessage(parent,"cc-debug-log",{message:"Shopper is or has been anonymous, storing data in cookie and session storage"}));try{a.sessionStorage.setItem(w.localStorageKey,p)}catch(q){}n(w.stateCookieName,p)}else try{a.localStorage.setItem(w.localStorageKey,p)}catch(q){}A=!0,d()},b.registerListener("cc-set-stored-state",setStoredState),b.registerListener("cc-remove-stored-state",r),b.registerListener("cc-set-shopper-id-cookie",o),b.registerListener("cc-remove-shopper-id-cookie",p),c()}(window,commService);</script></head><body></body></html>