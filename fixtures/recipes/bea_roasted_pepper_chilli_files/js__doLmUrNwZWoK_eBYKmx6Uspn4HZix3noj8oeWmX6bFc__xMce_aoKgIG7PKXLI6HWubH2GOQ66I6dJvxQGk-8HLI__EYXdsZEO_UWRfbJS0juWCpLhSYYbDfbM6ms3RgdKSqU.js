(function($){Drupal.behaviors.colorboxNode={attach:function(context,settings){if(!$.isFunction($.colorbox)||typeof settings.colorbox==='undefined'){return;}
if(settings.colorbox.mobiledetect&&window.matchMedia){var mq=window.matchMedia("(max-device-width: "+settings.colorbox.mobiledevicewidth+")");if(mq.matches){return;}}
$('.colorbox-node',context).once('init-colorbox-node-processed',function(){$(this).colorboxNode({'launch':false});});$('ul.contextual-links a',context).once('colorboxNodeContextual').click(function(){$.colorbox.close();});}};$.fn.colorboxNode=function(options){var settings={'launch':true,'width':Drupal.settings.colorbox_node.width,'height':Drupal.settings.colorbox_node.height};$.extend(settings,options);var href=$(this).attr('data-href');if(typeof href=='undefined'||href==false){href=$(this).attr('href');}
var parse=document.createElement('a');parse.href=href;if(!href){alert(Drupal.t('No url found on element'));}
var base_path=Drupal.settings.basePath;var path_prefix=Drupal.settings.pathPrefix;var pathname=parse.pathname;if(pathname.charAt(0)!='/'){pathname='/'+parse.pathname;}
var url=$.getParameterByName('q',href);if(base_path!='/'){if(url!=''){var link=pathname.replace(base_path,base_path+parse.search.replace('?q=','?q=/'+path_prefix+'colorbox/'));}else{var link=pathname.replace(base_path,base_path+path_prefix+'colorbox/')+parse.search;}}else{if(url!=''){var link=base_path+parse.search.replace('?q=','?q=/'+path_prefix+'colorbox/');}else{var link=base_path+path_prefix+'colorbox'+pathname+parse.search;}}
var element_settings={};element_settings.progress={'type':'none'};if(href){element_settings.url=link;element_settings.event='click';}
$(this).click(function(){var $this=$(this).clone();if(!$this.hasClass('colorbox-node-gallery')){$this.attr('rel','');}
var innerWidth=$this.data('inner-width');var innerHeight=$this.data('inner-height');if(typeof innerWidth!='undefined'&&typeof innerHeight!='undefined'){var params=$.urlDataParams(innerWidth,innerHeight);}else{var params=$.urlParams(href);}
if(params.innerHeight==undefined)params.innerHeight=settings.height;if(params.innerWidth==undefined)params.innerWidth=settings.width;params.html='<div id="colorboxNodeLoading"></div>';params.onComplete=function(){$this.colorboxNodeGroup();}
params.open=true;$this.colorbox($.extend({},Drupal.settings.colorbox,params));});var base=$(this).attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings);if(settings.launch){Drupal.ajax[base].eventResponse(this,'click');$(this).click();}}
$.fn.colorboxNodeGroup=function(){var $this=$(this);var rel=$this.attr('rel');if(rel&&$this.hasClass('colorbox-node-gallery')){if($('a.colorbox-node-gallery[rel="'+rel+'"]:not("#colorbox a[rel="'+rel+'"]")').length>1){$related=$('a.colorbox-node-gallery[rel="'+rel+'"]:not("#colorbox a[rel="'+rel+'"]")');var $related_unique=[];$related.each(function(){$.findHref($related_unique,this.href);if(!$.findHref($related_unique,this.href).length){$related_unique.push(this);}});var current=$.findHref($related_unique,$this.get(0).href);$related=$($related_unique);var idx=$related.index($(current));var tot=$related.length;$('#cboxPrevious, #cboxNext').show();$.colorbox.next=function(){index=getIndex(1);$related[index].click();};$.colorbox.prev=function(){index=getIndex(-1);$related[index].click();};$('#cboxCurrent').html(Drupal.settings.colorbox.current.replace('{current}',idx+1).replace('{total}',tot)).show();$('#cboxNext').html(Drupal.settings.colorbox.next).show();$('#cboxPrevious').html(Drupal.settings.colorbox.previous).show();var prefix='colorbox';$(document).unbind('keydown.'+prefix);$(document).bind('keydown.'+prefix,function(e){var key=e.keyCode;if($related[1]&&!e.altKey){if(key===37){e.preventDefault();$.colorbox.prev();}else if(key===39){e.preventDefault();$.colorbox.next();}}});}
function getIndex(increment){var max=$related.length;var newIndex=(idx+increment)%max;return(newIndex<0)?max+newIndex:newIndex;}}}
$.findHref=function(items,href){return $.grep(items,function(n,i){return n.href==href;});};$.urlParams=function(url){var p={},e,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,d=function(s){return decodeURIComponent(s.replace(a,' '));},q=url.split('?');while(e=r.exec(q[1])){e[1]=d(e[1]);e[2]=d(e[2]);switch(e[2].toLowerCase()){case'true':case'yes':e[2]=true;break;case'false':case'no':e[2]=false;break;}
if(e[1]=='width'){e[1]='innerWidth';}
if(e[1]=='height'){e[1]='innerHeight';}
p[e[1]]=e[2];}
return p;};$.urlDataParams=function(innerWidth,innerHeight){return{'innerWidth':innerWidth,'innerHeight':innerHeight};};$.getParameterByName=function(name,href){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexString="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexString);var found=regex.exec(href);if(found==null)
return"";else
return decodeURIComponent(found[1].replace(/\+/g," "));}})(jQuery);(function($){'use strict';$.fn.bindFirst=function(name,fn){this.on(name,fn);this.each(function(){var handlers=$._data(this,'events')[name.split('.')[0]];var handler=handlers.pop();handlers.splice(0,0,handler);});};$.fn.scrollToItem=function(title){this.each(function(){var $this=$(this),$item=$this.find('li:contains('+title+')');$this.scrollTo($item,400);});};Drupal.behaviors.BBCGFUserCollections={attach:function(context,settings){$('.collections-tooltip').once('bbcgf-user-collections',function(){var $tooltip=$(this);$tooltip.find('.btn--save').click(function(){$tooltip.find('.flag-action').trigger('click');});$tooltip.find('.my-collections-toggle').click(function(e){e.stopPropagation();$('.tooltip').removeClass('active');});$tooltip.find('.confirm-form a').on('click',function(){$tooltip.removeClass('tooltip-confirm');if($(this).hasClass('confirm')){$tooltip.find('.unflag-action').trigger('click',[true]);$tooltip.addClass('tooltip-progress');}});});$('.collections-tooltip .unflag-action').once('bbcgf-user-collections-unflag',function(){var $this=$(this);$this.bindFirst('click',function(e,confirm){if(!confirm){e.stopImmediatePropagation();e.preventDefault();$this.parents('.collections-tooltip').addClass('tooltip-confirm');}});});$('.my-collections-list a.add, .create-collection .form-submit').once('bbcgf-user-collections-add').click(function(){$(this).closest('.collections-tooltip').find('.flag-action').trigger('click');});$('.create-collection .form-item-title input').val('');$('body').once('bbcgf-user-collections-nids',function(){var nids=[];$('.node-recipe').each(function(){nids.push(this.id.split('-')[1]);$('input[name=nids]').val(nids.join(','));});});$('.flag-action').once('bbcgf-user-collections-progress').click(function(){$(this).parents('.collections-tooltip').addClass('tooltip-progress');});$(document).bind('flagGlobalAfterLinkUpdate',function(event,data){var $tooltip=$('#node-'+data.contentId+' .collections-tooltip');$tooltip.removeClass('tooltip-progress');if(data.flagName==='myrecipes'&&data.flagStatus==='unflagged'){$tooltip.find('.reset-link').trigger('click');$tooltip.removeClass('tooltip-saved');$tooltip.removeClass('active');if(window._gaq!==undefined){Drupal.GFAnalytics.trackEvent(['My GoodFood','Link','Remove from My GoodFood']);}}
else if(data.flagName==='myrecipes'&&data.flagStatus==='flagged'){$tooltip.addClass('tooltip-saved');if(window._gaq!==undefined){Drupal.GFAnalytics.trackEvent(['My GoodFood','Link','Save to My GoodFood']);}}});}};})(jQuery);(function(){'use strict';Drupal.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args);}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};};function getWindowSize(){Drupal.windowSize={width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};}
if(!window.addEventListener){window.attachEvent('onresize',Drupal.debounce(getWindowSize,10));}
else{window.addEventListener('resize',Drupal.debounce(getWindowSize,10));}
getWindowSize();})(jQuery);!function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on('click',dismiss,this.close)}
Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr('data-target'),$parent
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
$parent=$(selector)
e&&e.preventDefault()
$parent.length||($parent=$this.hasClass('alert')?$this:$this.parent())
$parent.trigger(e=$.Event('close'))
if(e.isDefaultPrevented())return
$parent.removeClass('in')
function removeElement(){$parent.trigger('closed').remove()}
$.support.transition&&$parent.hasClass('fade')?$parent.on($.support.transition.end,removeElement):removeElement()}
var old=$.fn.alert
$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data('alert')
if(!data)$this.data('alert',(data=new Alert(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.alert.Constructor=Alert
$.fn.alert.noConflict=function(){$.fn.alert=old
return this}
$(document).on('click.alert.data-api',dismiss,Alert.prototype.close)}(window.jQuery);!function($){'use strict';var Modal=function(element,options){this.options=options
this.$element=$(element)
this.$backdrop=this.isShown=null
if(this.options.remote){this.$element.find('.modal-content').load(this.options.remote,$.proxy(function(){this.$element.trigger('loaded.bs.modal')},this))}}
Modal.DEFAULTS={backdrop:true,keyboard:true,show:true}
Modal.prototype.toggle=function(_relatedTarget){return this[!this.isShown?'show':'hide'](_relatedTarget)}
Modal.prototype.show=function(_relatedTarget){var that=this
var e=$.Event('show.bs.modal',{relatedTarget:_relatedTarget})
this.$element.trigger(e)
if(this.isShown||e.isDefaultPrevented())return
this.isShown=true
this.escape()
this.$element.on('click.dismiss.bs.modal','[data-dismiss="modal"]',$.proxy(this.hide,this))
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade')
if(!that.$element.parent().length){that.$element.appendTo(document.body)}
that.$element.show().scrollTop(0)
if(transition){that.$element[0].offsetWidth}
that.$element.addClass('in').attr('aria-hidden',false)
that.enforceFocus()
var e=$.Event('shown.bs.modal',{relatedTarget:_relatedTarget})
transition?that.$element.find('.modal-dialog').one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)})}
Modal.prototype.hide=function(e){if(e)e.preventDefault()
e=$.Event('hide.bs.modal')
this.$element.trigger(e)
if(!this.isShown||e.isDefaultPrevented())return
this.isShown=false
this.escape()
$(document).off('focusin.bs.modal')
this.$element.removeClass('in').attr('aria-hidden',true).off('click.dismiss.bs.modal')
$.support.transition&&this.$element.hasClass('fade')?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}
Modal.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.focus()}},this))}
Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on('keyup.dismiss.bs.modal',$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off('keyup.dismiss.bs.modal')}}
Modal.prototype.hideModal=function(){var that=this
this.$element.hide()
this.backdrop(function(){that.removeBackdrop()
that.$element.trigger('hidden.bs.modal')})}
Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove()
this.$backdrop=null}
Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass('fade')?'fade':''
if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate
this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body)
this.$element.on('click.dismiss.bs.modal',$.proxy(function(e){if(e.target!==e.currentTarget)return
this.options.backdrop=='static'?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this))
if(doAnimate)this.$backdrop[0].offsetWidth
this.$backdrop.addClass('in')
if(!callback)return
doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in')
$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else if(callback){callback()}}
var old=$.fn.modal
$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this)
var data=$this.data('bs.modal')
var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('bs.modal',(data=new Modal(this,options)))
if(typeof option=='string')data[option](_relatedTarget)
else if(options.show)data.show(_relatedTarget)})}
$.fn.modal.Constructor=Modal
$.fn.modal.noConflict=function(){$.fn.modal=old
return this}
$(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this)
var href=$this.attr('href')
var $target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')))
var option=$target.data('bs.modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data())
if($this.is('a'))e.preventDefault()
$target.modal(option,this).one('hide',function(){$this.is(':visible')&&$this.focus()})})
$(document).on('show.bs.modal','.modal',function(){$(document.body).addClass('modal-open')}).on('hidden.bs.modal','.modal',function(){$(document.body).removeClass('modal-open')})}(jQuery);+function($){'use strict';function transitionEnd(){var el=document.createElement('bootstrap')
var transEndEventNames={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd otransitionend','transition':'transitionend'}
for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}
return false}
$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this
$(this).one($.support.transition.end,function(){called=true})
var callback=function(){if(!called)$($el).trigger($.support.transition.end)}
setTimeout(callback,duration)
return this}
$(function(){$.support.transition=transitionEnd()})}(jQuery);var data=new Image();data.onload=data.onerror=function(){if(this.width!=1||this.height!=1){document.documentElement.className+=" no-datauri";}}
data.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";jQuery.extend(jQuery.fn,{hasParent:function(p){return jQuery(p).find(this).length;}});;(function($){$.flexslider=function(el,options){var slider=$(el),vars=$.extend({},$.flexslider.defaults,options),namespace=vars.namespace,touch=("ontouchstart"in window)||window.DocumentTouch&&document instanceof DocumentTouch,eventType=(touch)?"touchend":"click",vertical=vars.direction==="vertical",reverse=vars.reverse,carousel=(vars.itemWidth>0),fade=vars.animation==="fade",asNav=vars.asNavFor!=="",methods={};slider.vars=vars;$.data(el,"flexslider",slider);methods={init:function(){slider.animating=false;slider.currentSlide=vars.startAt;slider.animatingTo=slider.currentSlide;slider.atEnd=(slider.currentSlide===0||slider.currentSlide===slider.last);slider.containerSelector=vars.selector.substr(0,vars.selector.search(' '));slider.slides=$(vars.selector,slider);slider.container=$(slider.containerSelector,slider);slider.count=slider.slides.length;slider.syncExists=$(vars.sync).length>0;if(vars.animation==="slide")vars.animation="swing";slider.prop=(vertical)?"top":"marginLeft";slider.args={};slider.manualPause=false;slider.transitions=!vars.video&&!fade&&vars.useCSS&&(function(){var obj=document.createElement('div'),props=['perspectiveProperty','WebkitPerspective','MozPerspective','OPerspective','msPerspective'];for(var i in props){if(obj.style[props[i]]!==undefined){slider.pfx=props[i].replace('Perspective','').toLowerCase();slider.prop="-"+slider.pfx+"-transform";return true;}}
return false;}());if(vars.controlsContainer!=="")slider.controlsContainer=$(vars.controlsContainer).length>0&&$(vars.controlsContainer);if(vars.manualControls!=="")slider.manualControls=$(vars.manualControls).length>0&&$(vars.manualControls);if(vars.randomize){slider.slides.sort(function(){return(Math.round(Math.random())-0.5);});slider.container.empty().append(slider.slides);}
slider.doMath();if(asNav)methods.asNav.setup();slider.setup("init");if(vars.controlNav)methods.controlNav.setup();if(vars.directionNav)methods.directionNav.setup();if(vars.keyboard&&($(slider.containerSelector).length===1||vars.multipleKeyboard)){$(document).bind('keyup',function(event){var keycode=event.keyCode;if(!slider.animating&&(keycode===39||keycode===37)){var target=(keycode===39)?slider.getTarget('next'):(keycode===37)?slider.getTarget('prev'):false;slider.flexAnimate(target,vars.pauseOnAction);}});}
if(vars.mousewheel){slider.bind('mousewheel',function(event,delta,deltaX,deltaY){event.preventDefault();var target=(delta<0)?slider.getTarget('next'):slider.getTarget('prev');slider.flexAnimate(target,vars.pauseOnAction);});}
if(vars.pausePlay)methods.pausePlay.setup();if(vars.slideshow){if(vars.pauseOnHover){slider.hover(function(){if(!slider.manualPlay&&!slider.manualPause)slider.pause();},function(){if(!slider.manualPause&&!slider.manualPlay)slider.play();});}
(vars.initDelay>0)?setTimeout(slider.play,vars.initDelay):slider.play();}
if(touch&&vars.touch)methods.touch();if(!fade||(fade&&vars.smoothHeight))$(window).bind("resize focus",methods.resize);setTimeout(function(){vars.start(slider);},200);},asNav:{setup:function(){slider.asNav=true;slider.animatingTo=Math.floor(slider.currentSlide/slider.move);slider.currentItem=slider.currentSlide;slider.slides.removeClass(namespace+"active-slide").eq(slider.currentItem).addClass(namespace+"active-slide");slider.slides.click(function(e){e.preventDefault();var $slide=$(this),target=$slide.index();if(!$(vars.asNavFor).data('flexslider').animating&&!$slide.hasClass('active')){slider.direction=(slider.currentItem<target)?"next":"prev";slider.flexAnimate(target,vars.pauseOnAction,false,true,true);}});}},controlNav:{setup:function(){if(!slider.manualControls){methods.controlNav.setupPaging();}else{methods.controlNav.setupManual();}},setupPaging:function(){var type=(vars.controlNav==="thumbnails")?'control-thumbs':'control-paging',j=1,item;slider.controlNavScaffold=$('<ol class="'+namespace+'control-nav '+namespace+type+'"></ol>');if(slider.pagingCount>1){for(var i=0;i<slider.pagingCount;i++){item=(vars.controlNav==="thumbnails")?'<img src="'+slider.slides.eq(i).attr("data-thumb")+'"/>':'<a>'+j+'</a>';slider.controlNavScaffold.append('<li>'+item+'</li>');j++;}}
(slider.controlsContainer)?$(slider.controlsContainer).append(slider.controlNavScaffold):slider.append(slider.controlNavScaffold);methods.controlNav.set();methods.controlNav.active();slider.controlNavScaffold.delegate('a, img',eventType,function(event){event.preventDefault();var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+'active')){slider.direction=(target>slider.currentSlide)?"next":"prev";slider.flexAnimate(target,vars.pauseOnAction);}});if(touch){slider.controlNavScaffold.delegate('a',"click touchstart",function(event){event.preventDefault();});}},setupManual:function(){slider.controlNav=slider.manualControls;methods.controlNav.active();slider.controlNav.live(eventType,function(event){event.preventDefault();var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+'active')){(target>slider.currentSlide)?slider.direction="next":slider.direction="prev";slider.flexAnimate(target,vars.pauseOnAction);}});if(touch){slider.controlNav.live("click touchstart",function(event){event.preventDefault();});}},set:function(){var selector=(vars.controlNav==="thumbnails")?'img':'a';slider.controlNav=$('.'+namespace+'control-nav li '+selector,(slider.controlsContainer)?slider.controlsContainer:slider);},active:function(){slider.controlNav.removeClass(namespace+"active").eq(slider.animatingTo).addClass(namespace+"active");},update:function(action,pos){if(slider.pagingCount>1&&action==="add"){slider.controlNavScaffold.append($('<li><a>'+slider.count+'</a></li>'));}else if(slider.pagingCount===1){slider.controlNavScaffold.find('li').remove();}else{slider.controlNav.eq(pos).closest('li').remove();}
methods.controlNav.set();(slider.pagingCount>1&&slider.pagingCount!==slider.controlNav.length)?slider.update(pos,action):methods.controlNav.active();}},directionNav:{setup:function(){var directionNavScaffold=$('<ul class="'+namespace+'direction-nav unstyled"><li><a class="'+namespace+'prev" href="#">'+vars.prevText+'</a></li><li><a class="'+namespace+'next" href="#">'+vars.nextText+'</a></li></ul>');if(slider.controlsContainer){$(slider.controlsContainer).after(directionNavScaffold);slider.directionNav=$('.'+namespace+'direction-nav li a',slider);}else{slider.append(directionNavScaffold);slider.directionNav=$('.'+namespace+'direction-nav li a',slider);}
methods.directionNav.update();slider.directionNav.bind(eventType,function(event){event.preventDefault();var target=($(this).hasClass(namespace+'next'))?slider.getTarget('next'):slider.getTarget('prev');slider.flexAnimate(target,vars.pauseOnAction);});if(touch){slider.directionNav.bind("click touchstart",function(event){event.preventDefault();});}},update:function(){var disabledClass=namespace+'disabled';if(slider.pagingCount===1){slider.directionNav.addClass(disabledClass);}else if(!vars.animationLoop){if(slider.animatingTo===0){slider.directionNav.removeClass(disabledClass).filter('.'+namespace+"prev").addClass(disabledClass);}else if(slider.animatingTo===slider.last){slider.directionNav.removeClass(disabledClass).filter('.'+namespace+"next").addClass(disabledClass);}else{slider.directionNav.removeClass(disabledClass);}}else{slider.directionNav.removeClass(disabledClass);}}},pausePlay:{setup:function(){var pausePlayScaffold=$('<div class="'+namespace+'pauseplay"><a></a></div>');if(slider.controlsContainer){slider.controlsContainer.append(pausePlayScaffold);slider.pausePlay=$('.'+namespace+'pauseplay a',slider.controlsContainer);}else{slider.append(pausePlayScaffold);slider.pausePlay=$('.'+namespace+'pauseplay a',slider);}
methods.pausePlay.update((vars.slideshow)?namespace+'pause':namespace+'play');slider.pausePlay.bind(eventType,function(event){event.preventDefault();if($(this).hasClass(namespace+'pause')){slider.manualPause=true;slider.manualPlay=false;slider.pause();}else{slider.manualPause=false;slider.manualPlay=true;slider.play();}});if(touch){slider.pausePlay.bind("click touchstart",function(event){event.preventDefault();});}},update:function(state){(state==="play")?slider.pausePlay.removeClass(namespace+'pause').addClass(namespace+'play').text(vars.playText):slider.pausePlay.removeClass(namespace+'play').addClass(namespace+'pause').text(vars.pauseText);}},touch:function(){var startX,startY,offset,cwidth,dx,startT,scrolling=false;el.addEventListener('touchstart',onTouchStart,false);function onTouchStart(e){if(slider.animating){e.preventDefault();}else if(e.touches.length===1){slider.pause();cwidth=(vertical)?slider.h:slider.w;startT=Number(new Date());offset=(carousel&&reverse&&slider.animatingTo===slider.last)?0:(carousel&&reverse)?slider.limit-(((slider.itemW+vars.itemMargin)*slider.move)*slider.animatingTo):(carousel&&slider.currentSlide===slider.last)?slider.limit:(carousel)?((slider.itemW+vars.itemMargin)*slider.move)*slider.currentSlide:(reverse)?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth;startX=(vertical)?e.touches[0].pageY:e.touches[0].pageX;startY=(vertical)?e.touches[0].pageX:e.touches[0].pageY;el.addEventListener('touchmove',onTouchMove,false);el.addEventListener('touchend',onTouchEnd,false);}}
function onTouchMove(e){dx=(vertical)?startX-e.touches[0].pageY:startX-e.touches[0].pageX;scrolling=(vertical)?(Math.abs(dx)<Math.abs(e.touches[0].pageX-startY)):(Math.abs(dx)<Math.abs(e.touches[0].pageY-startY));if(!scrolling||Number(new Date())-startT>500){e.preventDefault();if(!fade&&slider.transitions){if(!vars.animationLoop){dx=dx/((slider.currentSlide===0&&dx<0||slider.currentSlide===slider.last&&dx>0)?(Math.abs(dx)/cwidth+2):1);}
slider.setProps(offset+dx,"setTouch");}}}
function onTouchEnd(e){if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=(reverse)?-dx:dx,target=(updateDx>0)?slider.getTarget('next'):slider.getTarget('prev');if(slider.canAdvance(target)&&(Number(new Date())-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)){slider.flexAnimate(target,vars.pauseOnAction);}else{slider.flexAnimate(slider.currentSlide,vars.pauseOnAction,true);}}
el.removeEventListener('touchmove',onTouchMove,false);el.removeEventListener('touchend',onTouchEnd,false);startX=null;startY=null;dx=null;offset=null;}},resize:function(){if(!slider.animating&&slider.is(':visible')){if(!carousel)slider.doMath();if(fade){methods.smoothHeight();}else if(carousel){slider.slides.width(slider.computedW);slider.update(slider.pagingCount);slider.setProps();}
else if(vertical){slider.viewport.height(slider.h);slider.setProps(slider.h,"setTotal");}else{if(vars.smoothHeight)methods.smoothHeight();slider.newSlides.width(slider.computedW);slider.setProps(slider.computedW,"setTotal");}}},smoothHeight:function(dur){if(!vertical||fade){var $obj=(fade)?slider:slider.viewport;(dur)?$obj.animate({"height":slider.slides.eq(slider.animatingTo).height()},dur):$obj.height(slider.slides.eq(slider.animatingTo).height());}},sync:function(action){var $obj=$(vars.sync).data("flexslider"),target=slider.animatingTo;switch(action){case"animate":$obj.flexAnimate(target,vars.pauseOnAction,false,true);break;case"play":if(!$obj.playing&&!$obj.asNav){$obj.play();}break;case"pause":$obj.pause();break;}}}
slider.flexAnimate=function(target,pause,override,withSync,fromNav){if(asNav&&slider.pagingCount===1)slider.direction=(slider.currentItem<target)?"next":"prev";if(!slider.animating&&(slider.canAdvance(target,fromNav)||override)&&slider.is(":visible")){if(asNav&&withSync){var master=$(vars.asNavFor).data('flexslider');slider.atEnd=target===0||target===slider.count-1;master.flexAnimate(target,true,false,true,fromNav);slider.direction=(slider.currentItem<target)?"next":"prev";master.direction=slider.direction;if(Math.ceil((target+1)/slider.visible)-1!==slider.currentSlide&&target!==0){slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");target=Math.floor(target/slider.visible);}else{slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");return false;}}
slider.animating=true;slider.animatingTo=target;vars.before(slider);if(pause)slider.pause();if(slider.syncExists&&!fromNav)methods.sync("animate");if(vars.controlNav)methods.controlNav.active();if(!carousel)slider.slides.removeClass(namespace+'active-slide').eq(target).addClass(namespace+'active-slide');slider.atEnd=target===0||target===slider.last;if(vars.directionNav)methods.directionNav.update();if(target===slider.last){vars.end(slider);if(!vars.animationLoop)slider.pause();}
if(!fade){var dimension=(vertical)?slider.slides.filter(':first').height():slider.computedW,margin,slideString,calcNext;if(carousel){margin=(vars.itemWidth>slider.w)?vars.itemMargin*2:vars.itemMargin;calcNext=((slider.itemW+margin)*slider.move)*slider.animatingTo;slideString=(calcNext>slider.limit&&slider.visible!==1)?slider.limit:calcNext;}else if(slider.currentSlide===0&&target===slider.count-1&&vars.animationLoop&&slider.direction!=="next"){slideString=(reverse)?(slider.count+slider.cloneOffset)*dimension:0;}else if(slider.currentSlide===slider.last&&target===0&&vars.animationLoop&&slider.direction!=="prev"){slideString=(reverse)?0:(slider.count+1)*dimension;}else{slideString=(reverse)?((slider.count-1)-target+slider.cloneOffset)*dimension:(target+slider.cloneOffset)*dimension;}
slider.setProps(slideString,"",vars.animationSpeed);if(slider.transitions){if(!vars.animationLoop||!slider.atEnd){slider.animating=false;slider.currentSlide=slider.animatingTo;}
slider.container.unbind("webkitTransitionEnd transitionend");slider.container.bind("webkitTransitionEnd transitionend",function(){slider.wrapup(dimension);});}else{slider.container.animate(slider.args,vars.animationSpeed,vars.easing,function(){slider.wrapup(dimension);});}}else{slider.slides.eq(slider.currentSlide).fadeOut(vars.animationSpeed,vars.easing);slider.slides.eq(target).fadeIn(vars.animationSpeed,vars.easing,slider.wrapup);}
if(vars.smoothHeight)methods.smoothHeight(vars.animationSpeed);}}
slider.wrapup=function(dimension){if(!fade&&!carousel){if(slider.currentSlide===0&&slider.animatingTo===slider.last&&vars.animationLoop){slider.setProps(dimension,"jumpEnd");}else if(slider.currentSlide===slider.last&&slider.animatingTo===0&&vars.animationLoop){slider.setProps(dimension,"jumpStart");}}
slider.animating=false;slider.currentSlide=slider.animatingTo;vars.after(slider);}
slider.animateSlides=function(){if(!slider.animating)slider.flexAnimate(slider.getTarget("next"));}
slider.pause=function(){clearInterval(slider.animatedSlides);slider.playing=false;if(vars.pausePlay)methods.pausePlay.update("play");if(slider.syncExists)methods.sync("pause");}
slider.play=function(){slider.animatedSlides=setInterval(slider.animateSlides,vars.slideshowSpeed);slider.playing=true;if(vars.pausePlay)methods.pausePlay.update("pause");if(slider.syncExists)methods.sync("play");}
slider.canAdvance=function(target,fromNav){var last=(asNav)?slider.pagingCount-1:slider.last;return(fromNav)?true:(asNav&&slider.currentItem===slider.count-1&&target===0&&slider.direction==="prev")?true:(asNav&&slider.currentItem===0&&target===slider.pagingCount-1&&slider.direction!=="next")?false:(target===slider.currentSlide&&!asNav)?false:(vars.animationLoop)?true:(slider.atEnd&&slider.currentSlide===0&&target===last&&slider.direction!=="next")?false:(slider.atEnd&&slider.currentSlide===last&&target===0&&slider.direction==="next")?false:true;}
slider.getTarget=function(dir){slider.direction=dir;if(dir==="next"){return(slider.currentSlide===slider.last)?0:slider.currentSlide+1;}else{return(slider.currentSlide===0)?slider.last:slider.currentSlide-1;}}
slider.setProps=function(pos,special,dur){var target=(function(){var posCheck=(pos)?pos:((slider.itemW+vars.itemMargin)*slider.move)*slider.animatingTo,posCalc=(function(){if(carousel){return(special==="setTouch")?pos:(reverse&&slider.animatingTo===slider.last)?0:(reverse)?slider.limit-(((slider.itemW+vars.itemMargin)*slider.move)*slider.animatingTo):(slider.animatingTo===slider.last)?slider.limit:posCheck;}else{switch(special){case"setTotal":return(reverse)?((slider.count-1)-slider.currentSlide+slider.cloneOffset)*pos:(slider.currentSlide+slider.cloneOffset)*pos;case"setTouch":return(reverse)?pos:pos;case"jumpEnd":return(reverse)?pos:slider.count*pos;case"jumpStart":return(reverse)?slider.count*pos:pos;default:return pos;}}}());return(posCalc*-1)+"px";}());if(slider.transitions){target=(vertical)?"translate3d(0,"+target+",0)":"translate3d("+target+",0,0)";dur=(dur!==undefined)?(dur/1000)+"s":"0s";slider.container.css("-"+slider.pfx+"-transition-duration",dur);}
slider.args[slider.prop]=target;if(slider.transitions||dur===undefined)slider.container.css(slider.args);}
slider.setup=function(type){if(!fade){var sliderOffset,arr;if(type==="init"){slider.viewport=$('<div class="'+namespace+'viewport"></div>').css({"overflow":"hidden","position":"relative"}).appendTo(slider).append(slider.container);slider.cloneCount=0;slider.cloneOffset=0;if(reverse){arr=$.makeArray(slider.slides).reverse();slider.slides=$(arr);slider.container.empty().append(slider.slides);}}
if(vars.animationLoop&&!carousel){slider.cloneCount=2;slider.cloneOffset=1;if(type!=="init")slider.container.find('.clone').remove();slider.container.append(slider.slides.first().clone().addClass('clone')).prepend(slider.slides.last().clone().addClass('clone'));}
slider.newSlides=$(vars.selector,slider);sliderOffset=(reverse)?slider.count-1-slider.currentSlide+slider.cloneOffset:slider.currentSlide+slider.cloneOffset;if(vertical&&!carousel){slider.container.height((slider.count+slider.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){slider.newSlides.css({"display":"block"});slider.doMath();slider.viewport.height(slider.h);slider.setProps(sliderOffset*slider.h,"init");},(type==="init")?100:0);}else{slider.container.width((slider.count+slider.cloneCount)*200+"%");slider.setProps(sliderOffset*slider.computedW,"init");setTimeout(function(){slider.doMath();slider.newSlides.css({"width":slider.computedW,"float":"left","display":"block"});if(vars.smoothHeight)methods.smoothHeight();},(type==="init")?100:0);}}else{slider.slides.css({"width":"100%","float":"left","marginRight":"-100%","position":"relative"});if(type==="init")slider.slides.eq(slider.currentSlide).fadeIn(vars.animationSpeed,vars.easing);if(vars.smoothHeight)methods.smoothHeight();}
if(!carousel)slider.slides.removeClass(namespace+"active-slide").eq(slider.currentSlide).addClass(namespace+"active-slide");}
slider.doMath=function(){var slide=slider.slides.first(),slideMargin=vars.itemMargin,minItems=vars.minItems,maxItems=vars.maxItems;slider.w=slider.width();slider.h=slide.height();slider.boxPadding=slide.outerWidth()-slide.width();if(carousel){slider.itemT=vars.itemWidth+slideMargin;slider.minW=(minItems)?minItems*slider.itemT:slider.w;slider.maxW=(maxItems)?maxItems*slider.itemT:slider.w;slider.itemW=(slider.minW>slider.w)?(slider.w-(slideMargin*minItems))/minItems:(slider.maxW<slider.w)?(slider.w-(slideMargin*maxItems))/maxItems:(vars.itemWidth>slider.w)?slider.w:vars.itemWidth;slider.visible=Math.floor(slider.w/(slider.itemW+slideMargin));slider.move=(vars.move>0&&vars.move<slider.visible)?vars.move:slider.visible;slider.pagingCount=Math.ceil(((slider.count-slider.visible)/slider.move)+1);slider.last=slider.pagingCount-1;slider.limit=(slider.pagingCount===1)?0:(vars.itemWidth>slider.w)?((slider.itemW+(slideMargin*2))*slider.count)-slider.w-slideMargin:((slider.itemW+slideMargin)*slider.count)-slider.w-slideMargin;}else{slider.itemW=slider.w;slider.pagingCount=slider.count;slider.last=slider.count-1;}
slider.computedW=slider.itemW-slider.boxPadding;}
slider.update=function(pos,action){slider.doMath();if(!carousel){if(pos<slider.currentSlide){slider.currentSlide+=1;}else if(pos<=slider.currentSlide&&pos!==0){slider.currentSlide-=1;}
slider.animatingTo=slider.currentSlide;}
if(vars.controlNav&&!slider.manualControls){if((action==="add"&&!carousel)||slider.pagingCount>slider.controlNav.length){methods.controlNav.update("add");}else if((action==="remove"&&!carousel)||slider.pagingCount<slider.controlNav.length){if(carousel&&slider.currentSlide>slider.last){slider.currentSlide-=1;slider.animatingTo-=1;}
methods.controlNav.update("remove",slider.last);}}
if(vars.directionNav)methods.directionNav.update();}
slider.addSlide=function(obj,pos){var $obj=$(obj);slider.count+=1;slider.last=slider.count-1;if(vertical&&reverse){(pos!==undefined)?slider.slides.eq(slider.count-pos).after($obj):slider.container.prepend($obj);}else{(pos!==undefined)?slider.slides.eq(pos).before($obj):slider.container.append($obj);}
slider.update(pos,"add");slider.slides=$(vars.selector+':not(.clone)',slider);slider.setup();vars.added(slider);}
slider.removeSlide=function(obj){var pos=(isNaN(obj))?slider.slides.index($(obj)):obj;slider.count-=1;slider.last=slider.count-1;if(isNaN(obj)){$(obj,slider.slides).remove();}else{(vertical&&reverse)?slider.slides.eq(slider.last).remove():slider.slides.eq(obj).remove();}
slider.doMath();slider.update(pos,"remove");slider.slides=$(vars.selector+':not(.clone)',slider);slider.setup();vars.removed(slider);}
methods.init();}
$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}}
$.fn.flexslider=function(options){if(options===undefined)options={};if(typeof options==="object"){return this.each(function(){var $this=$(this),selector=(options.selector)?options.selector:".slides > li",$slides=$this.find(selector);if($slides.length===1){$slides.fadeIn(400);if(options.start)options.start($this);}else if($this.data('flexslider')===undefined){new $.flexslider(this,options);}});}else{var $slider=$(this).data('flexslider');switch(options){case"play":$slider.play();break;case"pause":$slider.pause();break;case"next":$slider.flexAnimate($slider.getTarget("next"),true);break;case"prev":case"previous":$slider.flexAnimate($slider.getTarget("prev"),true);break;default:if(typeof options==="number")$slider.flexAnimate(options,true);}}}})(jQuery);/* 4.)
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */(function(){var e=Math,t=function(e){return e>>0},n=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",r=/android/gi.test(navigator.appVersion),i=/iphone|ipad/gi.test(navigator.appVersion),s=/playbook/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),u="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!o,f=n+"Transform"in document.documentElement.style,l=i||s,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),h=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",d=a?"touchstart":"mousedown",v=a?"touchmove":"mousemove",m=a?"touchend":"mouseup",g=a?"touchcancel":"mouseup",y=n=="Moz"?"DOMMouseScroll":"mousewheel",b="translate"+(u?"3d(":"("),w=u?",0)":")",E=function(e,t){var s=this,o=document,c;s.wrapper=typeof e=="object"?e:o.getElementById(e);s.wrapper.style.overflow="hidden";s.scroller=s.wrapper.children[0];s.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:r,hideScrollbar:i,fadeScrollbar:i&&u,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(c in t)s.options[c]=t[c];s.x=s.options.x;s.y=s.options.y;s.options.useTransform=f?s.options.useTransform:!1;s.options.hScrollbar=s.options.hScroll&&s.options.hScrollbar;s.options.vScrollbar=s.options.vScroll&&s.options.vScrollbar;s.options.zoom=s.options.useTransform&&s.options.zoom;s.options.useTransition=l&&s.options.useTransition;if(s.options.zoom&&r){b="translate(";w=")"}s.scroller.style[n+"TransitionProperty"]=s.options.useTransform?"-"+n.toLowerCase()+"-transform":"top left";s.scroller.style[n+"TransitionDuration"]="0";s.scroller.style[n+"TransformOrigin"]="0 0";s.options.useTransition&&(s.scroller.style[n+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");s.options.useTransform?s.scroller.style[n+"Transform"]=b+s.x+"px,"+s.y+"px"+w:s.scroller.style.cssText+=";position:absolute;top:"+s.y+"px;left:"+s.x+"px";s.options.useTransition&&(s.options.fixedScrollbar=!0);s.refresh();s._bind(p,window);s._bind(d);if(!a){s._bind("mouseout",s.wrapper);s.options.wheelAction!="none"&&s._bind(y)}s.options.checkDOMChanges&&(s.checkDOMTime=setInterval(function(){s._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case d:if(!a&&e.button!==0)return;t._start(e);break;case v:t._move(e);break;case m:case g:t._end(e);break;case p:t._resize();break;case y:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(r){var i=this,s=document,o;if(!i[r+"Scrollbar"]){if(i[r+"ScrollbarWrapper"]){f&&(i[r+"ScrollbarIndicator"].style[n+"Transform"]="");i[r+"ScrollbarWrapper"].parentNode.removeChild(i[r+"ScrollbarWrapper"]);i[r+"ScrollbarWrapper"]=null;i[r+"ScrollbarIndicator"]=null}return}if(!i[r+"ScrollbarWrapper"]){o=s.createElement("div");i.options.scrollbarClass?o.className=i.options.scrollbarClass+r.toUpperCase():o.style.cssText="position:absolute;z-index:100;"+(r=="h"?"height:7px;bottom:1px;left:2px;right:"+(i.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(i.hScrollbar?"7":"2")+"px;top:2px;right:1px");o.style.cssText+=";pointer-events:none;-"+n+"-transition-property:opacity;-"+n+"-transition-duration:"+(i.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(i.options.hideScrollbar?"0":"1");i.wrapper.appendChild(o);i[r+"ScrollbarWrapper"]=o;o=s.createElement("div");i.options.scrollbarClass||(o.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+n+"-background-clip:padding-box;-"+n+"-box-sizing:border-box;"+(r=="h"?"height:100%":"width:100%")+";-"+n+"-border-radius:3px;border-radius:3px");o.style.cssText+=";pointer-events:none;-"+n+"-transition-property:-"+n+"-transform;-"+n+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+n+"-transition-duration:0;-"+n+"-transform:"+b+"0,0"+w;i.options.useTransition&&(o.style.cssText+=";-"+n+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");i[r+"ScrollbarWrapper"].appendChild(o);i[r+"ScrollbarIndicator"]=o}if(r=="h"){i.hScrollbarSize=i.hScrollbarWrapper.clientWidth;i.hScrollbarIndicatorSize=e.max(t(i.hScrollbarSize*i.hScrollbarSize/i.scrollerW),8);i.hScrollbarIndicator.style.width=i.hScrollbarIndicatorSize+"px";i.hScrollbarMaxScroll=i.hScrollbarSize-i.hScrollbarIndicatorSize;i.hScrollbarProp=i.hScrollbarMaxScroll/i.maxScrollX}else{i.vScrollbarSize=i.vScrollbarWrapper.clientHeight;i.vScrollbarIndicatorSize=e.max(t(i.vScrollbarSize*i.vScrollbarSize/i.scrollerH),8);i.vScrollbarIndicator.style.height=i.vScrollbarIndicatorSize+"px";i.vScrollbarMaxScroll=i.vScrollbarSize-i.vScrollbarIndicatorSize;i.vScrollbarProp=i.vScrollbarMaxScroll/i.maxScrollY}i._scrollbarPos(r,!0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},r?200:0)},_pos:function(e,r){if(this.zoomed)return;e=this.hScroll?e:0;r=this.vScroll?r:0;if(this.options.useTransform)this.scroller.style[n+"Transform"]=b+e+"px,"+r+"px"+w+" scale("+this.scale+")";else{e=t(e);r=t(r);this.scroller.style.left=e+"px";this.scroller.style.top=r+"px"}this.x=e;this.y=r;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(e,r){var i=this,s=e=="h"?i.x:i.y,o;if(!i[e+"Scrollbar"])return;s=i[e+"ScrollbarProp"]*s;if(s<0){if(!i.options.fixedScrollbar){o=i[e+"ScrollbarIndicatorSize"]+t(s*3);o<8&&(o=8);i[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=o+"px"}s=0}else if(s>i[e+"ScrollbarMaxScroll"])if(!i.options.fixedScrollbar){o=i[e+"ScrollbarIndicatorSize"]-t((s-i[e+"ScrollbarMaxScroll"])*3);o<8&&(o=8);i[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=o+"px";s=i[e+"ScrollbarMaxScroll"]+(i[e+"ScrollbarIndicatorSize"]-o)}else s=i[e+"ScrollbarMaxScroll"];i[e+"ScrollbarWrapper"].style[n+"TransitionDelay"]="0";i[e+"ScrollbarWrapper"].style.opacity=r&&i.options.hideScrollbar?"0":"1";i[e+"ScrollbarIndicator"].style[n+"Transform"]=b+(e=="h"?s+"px,0":"0,"+s+"px")+w},_start:function(t){var r=this,i=a?t.touches[0]:t,s,o,u,f,l;if(!r.enabled)return;r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,t);(r.options.useTransition||r.options.zoom)&&r._transitionTime(0);r.moved=!1;r.animating=!1;r.zoomed=!1;r.distX=0;r.distY=0;r.absDistX=0;r.absDistY=0;r.dirX=0;r.dirY=0;if(r.options.zoom&&a&&t.touches.length>1){f=e.abs(t.touches[0].pageX-t.touches[1].pageX);l=e.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDistStart=e.sqrt(f*f+l*l);r.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x;r.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y;r.options.onZoomStart&&r.options.onZoomStart.call(r,t)}if(r.options.momentum){if(r.options.useTransform){s=getComputedStyle(r.scroller,null)[n+"Transform"].replace(/[^0-9-.,]/g,"").split(",");o=s[4]*1;u=s[5]*1}else{o=getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,"")*1;u=getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(o!=r.x||u!=r.y){r.options.useTransition?r._unbind("webkitTransitionEnd"):h(r.aniTime);r.steps=[];r._pos(o,u)}}r.absStartX=r.x;r.absStartY=r.y;r.startX=r.x;r.startY=r.y;r.pointX=i.pageX;r.pointY=i.pageY;r.startTime=t.timeStamp||Date.now();r.options.onScrollStart&&r.options.onScrollStart.call(r,t);r._bind(v);r._bind(m);r._bind(g)},_move:function(t){var r=this,i=a?t.touches[0]:t,s=i.pageX-r.pointX,o=i.pageY-r.pointY,u=r.x+s,f=r.y+o,l,c,h,p=t.timeStamp||Date.now();r.options.onBeforeScrollMove&&r.options.onBeforeScrollMove.call(r,t);if(r.options.zoom&&a&&t.touches.length>1){l=e.abs(t.touches[0].pageX-t.touches[1].pageX);c=e.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDist=e.sqrt(l*l+c*c);r.zoomed=!0;h=1/r.touchesDistStart*r.touchesDist*this.scale;h<r.options.zoomMin?h=.5*r.options.zoomMin*Math.pow(2,h/r.options.zoomMin):h>r.options.zoomMax&&(h=2*r.options.zoomMax*Math.pow(.5,r.options.zoomMax/h));r.lastScale=h/this.scale;u=this.originX-this.originX*r.lastScale+this.x,f=this.originY-this.originY*r.lastScale+this.y;this.scroller.style[n+"Transform"]=b+u+"px,"+f+"px"+w+" scale("+h+")";r.options.onZoom&&r.options.onZoom.call(r,t);return}r.pointX=i.pageX;r.pointY=i.pageY;if(u>0||u<r.maxScrollX)u=r.options.bounce?r.x+s/2:u>=0||r.maxScrollX>=0?0:r.maxScrollX;if(f>r.minScrollY||f<r.maxScrollY)f=r.options.bounce?r.y+o/2:f>=r.minScrollY||r.maxScrollY>=0?r.minScrollY:r.maxScrollY;r.distX+=s;r.distY+=o;r.absDistX=e.abs(r.distX);r.absDistY=e.abs(r.distY);if(r.absDistX<6&&r.absDistY<6)return;if(r.options.lockDirection)if(r.absDistX>r.absDistY+5){f=r.y;o=0}else if(r.absDistY>r.absDistX+5){u=r.x;s=0}r.moved=!0;r._pos(u,f);r.dirX=s>0?-1:s<0?1:0;r.dirY=o>0?-1:o<0?1:0;if(p-r.startTime>300){r.startTime=p;r.startX=r.x;r.startY=r.y}r.options.onScrollMove&&r.options.onScrollMove.call(r,t)},_end:function(r){if(a&&r.touches.length!=0)return;var i=this,s=a?r.changedTouches[0]:r,o,u,f={dist:0,time:0},l={dist:0,time:0},c=(r.timeStamp||Date.now())-i.startTime,h=i.x,p=i.y,d,y,E,S,x;i._unbind(v);i._unbind(m);i._unbind(g);i.options.onBeforeScrollEnd&&i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){x=i.scale*i.lastScale;x=Math.max(i.options.zoomMin,x);x=Math.min(i.options.zoomMax,x);i.lastScale=x/i.scale;i.scale=x;i.x=i.originX-i.originX*i.lastScale+i.x;i.y=i.originY-i.originY*i.lastScale+i.y;i.scroller.style[n+"TransitionDuration"]="200ms";i.scroller.style[n+"Transform"]=b+i.x+"px,"+i.y+"px"+w+" scale("+i.scale+")";i.zoomed=!1;i.refresh();i.options.onZoomEnd&&i.options.onZoomEnd.call(i,r);return}if(!i.moved){if(a)if(i.doubleTapTimer&&i.options.zoom){clearTimeout(i.doubleTapTimer);i.doubleTapTimer=null;i.options.onZoomStart&&i.options.onZoomStart.call(i,r);i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1);i.options.onZoomEnd&&setTimeout(function(){i.options.onZoomEnd.call(i,r)},200)}else this.options.handleClick&&(i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null;o=s.target;while(o.nodeType!=1)o=o.parentNode;if(o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"){u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);u._fake=!0;o.dispatchEvent(u)}},i.options.zoom?250:0));i._resetPos(200);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(c<300&&i.options.momentum){f=h?i._momentum(h-i.startX,c,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):f;l=p?i._momentum(p-i.startY,c,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):l;h=i.x+f.dist;p=i.y+l.dist;if(i.x>0&&h>0||i.x<i.maxScrollX&&h<i.maxScrollX)f={dist:0,time:0};if(i.y>i.minScrollY&&p>i.minScrollY||i.y<i.maxScrollY&&p<i.maxScrollY)l={dist:0,time:0}}if(f.dist||l.dist){E=e.max(e.max(f.time,l.time),10);if(i.options.snap){d=h-i.absStartX;y=p-i.absStartY;if(e.abs(d)<i.options.snapThreshold&&e.abs(y)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{S=i._snap(h,p);h=S.x;p=S.y;E=e.max(S.time,E)}}i.scrollTo(t(h),t(p),E);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}if(i.options.snap){d=h-i.absStartX;y=p-i.absStartY;if(e.abs(d)<i.options.snapThreshold&&e.abs(y)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{S=i._snap(i.x,i.y);(S.x!=i.x||S.y!=i.y)&&i.scrollTo(S.x,S.y,S.time)}i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r);return}i._resetPos(200);i.options.onTouchEnd&&i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this,r=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,i=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(r==t.x&&i==t.y){if(t.moved){t.moved=!1;t.options.onScrollEnd&&t.options.onScrollEnd.call(t)}if(t.hScrollbar&&t.options.hideScrollbar){n=="webkit"&&(t.hScrollbarWrapper.style[n+"TransitionDelay"]="300ms");t.hScrollbarWrapper.style.opacity="0"}if(t.vScrollbar&&t.options.hideScrollbar){n=="webkit"&&(t.vScrollbarWrapper.style[n+"TransitionDelay"]="300ms");t.vScrollbarWrapper.style.opacity="0"}return}t.scrollTo(r,i,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e){n=e.wheelDeltaX/12;r=e.wheelDeltaY/12}else if("wheelDelta"in e)n=r=e.wheelDelta/12;else{if(!("detail"in e))return;n=r=-e.detail*3}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0));o<t.options.zoomMin&&(o=t.options.zoomMin);o>t.options.zoomMax&&(o=t.options.zoomMax);if(o!=t.scale){!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e);t.wheelZoomCount++;t.zoom(e.pageX,e.pageY,o,400);setTimeout(function(){t.wheelZoomCount--;!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400)}return}i=t.x+n;s=t.y+r;i>0?i=0:i<t.maxScrollX&&(i=t.maxScrollX);s>t.minScrollY?s=t.minScrollY:s<t.maxScrollY&&(s=t.maxScrollY);t.maxScrollY<0&&t.scrollTo(i,s,0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd");t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift();s.x==n&&s.y==r&&(s.time=0);t.animating=!0;t.moved=!0;if(t.options.useTransition){t._transitionTime(s.time);t._pos(s.x,s.y);t.animating=!1;s.time?t._bind("webkitTransitionEnd"):t._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){t._pos(s.x,s.y);t.animating=!1;t.options.onAnimationEnd&&t.options.onAnimationEnd.call(t);t._startAni();return}a=(a-i)/s.time-1;o=e.sqrt(1-a*a);f=(s.x-n)*o+n;l=(s.y-r)*o+r;t._pos(f,l);t.animating&&(t.aniTime=c(u))};u()},_transitionTime:function(e){e+="ms";this.scroller.style[n+"TransitionDuration"]=e;this.hScrollbar&&(this.hScrollbarIndicator.style[n+"TransitionDuration"]=e);this.vScrollbar&&(this.vScrollbarIndicator.style[n+"TransitionDuration"]=e)},_momentum:function(n,r,i,s,o){var u=6e-4,a=e.abs(n)/r,f=a*a/(2*u),l=0,c=0;if(n>0&&f>i){c=o/(6/(f/a*u));i+=c;a=a*i/f;f=i}else if(n<0&&f>s){c=o/(6/(f/a*u));s+=c;a=a*s/f;f=s}f*=n<0?-1:1;l=a/u;return{dist:f,time:t(l)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}if(e!=this.wrapper){t*=this.scale;n*=this.scale}return{left:t,top:n}},_snap:function(n,r){var i=this,s,o,u,a,f,l;u=i.pagesX.length-1;for(s=0,o=i.pagesX.length;s<o;s++)if(n>=i.pagesX[s]){u=s;break}u==i.currPageX&&u>0&&i.dirX<0&&u--;n=i.pagesX[u];f=e.abs(n-i.pagesX[i.currPageX]);f=f?e.abs(i.x-n)/f*500:0;i.currPageX=u;u=i.pagesY.length-1;for(s=0;s<u;s++)if(r>=i.pagesY[s]){u=s;break}u==i.currPageY&&u>0&&i.dirY<0&&u--;r=i.pagesY[u];l=e.abs(r-i.pagesY[i.currPageY]);l=l?e.abs(i.y-r)/l*500:0;i.currPageY=u;a=t(e.max(f,l))||200;return{x:n,y:r,time:a}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[n+"Transform"]="";e.hScrollbar=!1;e.vScrollbar=!1;e._scrollbar("h");e._scrollbar("v");e._unbind(p,window);e._unbind(d);e._unbind(v);e._unbind(m);e._unbind(g);if(!e.options.hasTouch){e._unbind("mouseout",e.wrapper);e._unbind(y)}e.options.useTransition&&e._unbind("webkitTransitionEnd");e.options.checkDOMChanges&&clearInterval(e.checkDOMTime);e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var e=this,r,i,s,o,u=0,a=0;e.scale<e.options.zoomMin&&(e.scale=e.options.zoomMin);e.wrapperW=e.wrapper.clientWidth||1;e.wrapperH=e.wrapper.clientHeight||1;e.minScrollY=-e.options.topOffset||0;e.scrollerW=t(e.scroller.offsetWidth*e.scale);e.scrollerH=t((e.scroller.offsetHeight+e.minScrollY)*e.scale);e.maxScrollX=e.wrapperW-e.scrollerW;e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY;e.dirX=0;e.dirY=0;e.options.onRefresh&&e.options.onRefresh.call(e);e.hScroll=e.options.hScroll&&e.maxScrollX<0;e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH);e.hScrollbar=e.hScroll&&e.options.hScrollbar;e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH;r=e._offset(e.wrapper);e.wrapperOffsetLeft=-r.left;e.wrapperOffsetTop=-r.top;if(typeof e.options.snap=="string"){e.pagesX=[];e.pagesY=[];o=e.scroller.querySelectorAll(e.options.snap);for(i=0,s=o.length;i<s;i++){u=e._offset(o[i]);u.left+=e.wrapperOffsetLeft;u.top+=e.wrapperOffsetTop;e.pagesX[i]=u.left<e.maxScrollX?e.maxScrollX:u.left*e.scale;e.pagesY[i]=u.top<e.maxScrollY?e.maxScrollY:u.top*e.scale}}else if(e.options.snap){e.pagesX=[];while(u>=e.maxScrollX){e.pagesX[a]=u;u-=e.wrapperW;a++}e.maxScrollX%e.wrapperW&&(e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1]);u=0;a=0;e.pagesY=[];while(u>=e.maxScrollY){e.pagesY[a]=u;u-=e.wrapperH;a++}e.maxScrollY%e.wrapperH&&(e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1])}e._scrollbar("h");e._scrollbar("v");if(!e.zoomed){e.scroller.style[n+"TransitionDuration"]="0";e._resetPos(200)}},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop();s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++){if(s[o].relative){s[o].x=i.x-s[o].x;s[o].y=i.y-s[o].y}i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0})}i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t);i.left+=r.wrapperOffsetLeft;i.top+=r.wrapperOffsetTop;i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left;i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top;n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n;r.scrollTo(i.left,i.top,n)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n;r.options.onScrollStart&&r.options.onScrollStart.call(r);if(r.options.snap){e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e;t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t;e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e;t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t;r.currPageX=e;r.currPageY=t;i=r.pagesX[e];s=r.pagesY[t]}else{i=-r.wrapperW*e;s=-r.wrapperH*t;i<r.maxScrollX&&(i=r.maxScrollX);s<r.maxScrollY&&(s=r.maxScrollY)}r.scrollTo(i,s,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(v);this._unbind(m);this._unbind(g)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):h(this.aniTime);this.steps=[];this.moved=!1;this.animating=!1},zoom:function(e,t,r,i){var s=this,o=r/s.scale;if(!s.options.useTransform)return;s.zoomed=!0;i=i===undefined?200:i;e=e-s.wrapperOffsetLeft-s.x;t=t-s.wrapperOffsetTop-s.y;s.x=e-e*o+s.x;s.y=t-t*o+s.y;s.scale=r;s.refresh();s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x;s.y=s.y>s.minScrollY?s.minScrollY:s.y<s.maxScrollY?s.maxScrollY:s.y;s.scroller.style[n+"TransitionDuration"]=i+"ms";s.scroller.style[n+"Transform"]=b+s.x+"px,"+s.y+"px"+w+" scale("+r+")";s.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};typeof exports!="undefined"?exports.iScroll=E:window.iScroll=E})();;/**/
/*!
 * @preserve
 * jquery.scrolldepth.js | v0.5
 * Copyright (c) 2014 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,t,n){"use strict";var r,a,l,i={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0},o=e(t),c=[],u=0;e.scrollDepth=function(h){function p(e,t,n,i){l?(dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:!0}),h.pixelDepth&&arguments.length>2&&n>u&&(u=n,dataLayer.push({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:f(n),eventValue:1,eventNonInteraction:!0})),h.userTiming&&arguments.length>3&&dataLayer.push({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:i})):(r&&(ga("send","event","Scroll Depth",e,t,1,{nonInteraction:1}),h.pixelDepth&&arguments.length>2&&n>u&&(u=n,ga("send","event","Scroll Depth","Pixel Depth",f(n),1,{nonInteraction:1})),h.userTiming&&arguments.length>3&&ga("send","timing","Scroll Depth",e,i,t)),a&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,!0]),h.pixelDepth&&arguments.length>2&&n>u&&(u=n,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",f(n),1,!0])),h.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,i,t,100])))}function g(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function s(t,n,r){e.each(t,function(t,a){-1===e.inArray(t,c)&&n>=a&&(p("Percentage",t,n,r),c.push(t))})}function v(t,n,r){e.each(t,function(t,a){-1===e.inArray(a,c)&&e(a).length&&n>=e(a).offset().top&&(p("Elements",a,n,r),c.push(a))})}function f(e){return(250*Math.floor(e/250)).toString()}function m(e,t){var n,r,a,l=null,i=0,o=function(){i=new Date,l=null,a=e.apply(n,r)};return function(){var c=new Date;i||(i=c);var u=t-(c-i);return n=this,r=arguments,0>=u?(clearTimeout(l),l=null,i=c,a=e.apply(n,r)):l||(l=setTimeout(o,u)),a}}var D=+new Date;h=e.extend({},i,h),e(n).height()<h.minHeight||("function"==typeof ga&&(r=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(a=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(l=!0),p("Percentage","Baseline"),o.on("scroll.scrollDepth",m(function(){var r=e(n).height(),a=t.innerHeight?t.innerHeight:o.height(),l=o.scrollTop()+a,i=g(r),u=+new Date-D;return c.length>=4+h.elements.length?void o.off("scroll.scrollDepth"):(h.elements&&v(h.elements,l,u),void(h.percentage&&s(i,l,u)))},500)))}}(jQuery,window,document);;/**/
/**
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.6
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,targ,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
;/**/
LazyLoad=function(k){function p(b,a){var g=k.createElement(b),c;for(c in a)a.hasOwnProperty(c)&&g.setAttribute(c,a[c]);return g}function l(b){var a=m[b],c,f;if(a)c=a.callback,f=a.urls,f.shift(),h=0,f.length||(c&&c.call(a.context,a.obj),m[b]=null,n[b].length&&j(b))}function w(){var b=navigator.userAgent;c={async:k.createElement("script").async===!0};(c.webkit=/AppleWebKit\//.test(b))||(c.ie=/MSIE/.test(b))||(c.opera=/Opera/.test(b))||(c.gecko=/Gecko\//.test(b))||(c.unknown=!0)}function j(b,a,g,f,h){var j=
function(){l(b)},o=b==="css",q=[],d,i,e,r;c||w();if(a)if(a=typeof a==="string"?[a]:a.concat(),o||c.async||c.gecko||c.opera)n[b].push({urls:a,callback:g,obj:f,context:h});else{d=0;for(i=a.length;d<i;++d)n[b].push({urls:[a[d]],callback:d===i-1?g:null,obj:f,context:h})}if(!m[b]&&(r=m[b]=n[b].shift())){s||(s=k.head||k.getElementsByTagName("head")[0]);a=r.urls;d=0;for(i=a.length;d<i;++d)g=a[d],o?e=c.gecko?p("style"):p("link",{href:g,rel:"stylesheet"}):(e=p("script",{src:g}),e.async=!1),e.className="lazyload",
e.setAttribute("charset","utf-8"),c.ie&&!o?e.onreadystatechange=function(){if(/loaded|complete/.test(e.readyState))e.onreadystatechange=null,j()}:o&&(c.gecko||c.webkit)?c.webkit?(r.urls[d]=e.href,t()):(e.innerHTML='@import "'+g+'";',u(e)):e.onload=e.onerror=j,q.push(e);d=0;for(i=q.length;d<i;++d)s.appendChild(q[d])}}function u(b){var a;try{a=!!b.sheet.cssRules}catch(c){h+=1;h<200?setTimeout(function(){u(b)},50):a&&l("css");return}l("css")}function t(){var b=m.css,a;if(b){for(a=v.length;--a>=0;)if(v[a].href===
b.urls[0]){l("css");break}h+=1;b&&(h<200?setTimeout(t,50):l("css"))}}var c,s,m={},h=0,n={css:[],js:[]},v=k.styleSheets;return{css:function(b,a,c,f){j("css",b,a,c,f)},js:function(b,a,c,f){j("js",b,a,c,f)}}}(this.document);;/**/
window.matchMedia=window.matchMedia||(function(doc,undefined){return function(q){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement('body'),div=doc.createElement('div');div.id='mq-test-1';div.style.cssText='position:absolute;top:-100em';fakeBody.style.background='none';fakeBody.appendChild(div);div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>';docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:q};};}(document));/*! $.noUiSlider 4.3.0
 *  Documentation available at:
 *  http://refreshless.com/nouislider/
 *
 *  Copyright Léon Gersen, https://twitter.com/LeonGersen
 *  Released under the WTFPL license
 *  http://www.wtfpl.net/about/
 */
(function(f){if(f.zepto&&!f.fn.removeData)throw new ReferenceError("Zepto is loaded without the data module.");f.fn.noUiSlider=function(x){function n(a,c,d){f.isArray(a)||(a=[a]);f.each(a,function(){"function"===typeof this&&this.call(c,d)})}function s(a){return a instanceof f||f.zepto&&f.zepto.isZ(a)}function y(a){a.preventDefault();var c=0===a.type.indexOf("touch"),d=0===a.type.indexOf("mouse"),b=0===a.type.indexOf("pointer"),h,l,e=a;0===a.type.indexOf("MSPointer")&&(b=!0);a.originalEvent&&(a=a.originalEvent);
c&&(h=a.changedTouches[0].pageX,l=a.changedTouches[0].pageY);if(d||b)b||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),h=a.clientX+window.pageXOffset,l=a.clientY+window.pageYOffset;return f.extend(e,{pointX:h,pointY:l,cursor:d})}function p(a,c,d,b,h){a=a.replace(/\s/g,q+" ")+q;if(h)return c.on(a,f.proxy(d,f.extend(c,b)));b.handler=d;return c.on(a,f.proxy(function(b){if(this.target.hasClass("noUi-state-tap")||
this.target.attr("disabled"))return!1;this.handler(y(b))},b))}function k(a){return!isNaN(parseFloat(a))&&isFinite(a)}function z(){var a=parseFloat(this.style[f(this).data("style")]);return isNaN(a)?-1:a}function A(a){var c=this.target;if(void 0===a)return this.element.data("value");!0===a?a=this.element.data("value"):this.element.data("value",a);f.each(this.elements,function(){if("function"===typeof this)this.call(c,a);else this[0][this[1]](a)})}function B(){var a=[null,null];a[this.which]=this.val();
this.target.val(a,!0)}function C(a,c){var d={handles:{r:!0,t:function(b){b=parseInt(b,10);return 1===b||2===b}},range:{r:!0,t:function(b,a,c){if(2!==b.length)return!1;b=[parseFloat(b[0]),parseFloat(b[1])];if(!k(b[0])||!k(b[1])||"range"===c&&b[0]===b[1]||b[1]<b[0])return!1;a[c]=b;return!0}},start:{r:!0,t:function(b,a,c){return 1===a.handles?(f.isArray(b)&&(b=b[0]),b=parseFloat(b),a.start=[b],k(b)):d.range.t(b,a,c)}},connect:{t:function(b,a){return 1===a.handles?"lower"===b||"upper"===b:"boolean"===
typeof b}},orientation:{t:function(b){return"horizontal"===b||"vertical"===b}},margin:{r:!0,t:function(b,a,c){b=parseFloat(b);a[c]=100*b/(a.range[1]-a.range[0]);return k(b)}},direction:{r:!0,t:function(b,a,c){switch(b){case "ltr":a[c]=0;break;case "rtl":a[c]=1;break;default:return!1}return!0}},serialization:{r:!0,t:function(b,a,c){function d(a){return s(a)||"string"===typeof a||"function"===typeof a||!1===a||s(a[0])&&"function"===typeof a[0][a[1]]}function e(a){var b=[[],[]];d(a)?b[0].push(a):f.each(a,
function(a,c){1<a||(d(c)?b[a].push(c):b[a]=b[a].concat(c))});return b}if(b.to){var m,k;b.to=e(b.to,0);a.direction&&b.to[1].length&&b.to.reverse();for(m=0;m<a.handles;m++)for(k=0;k<b.to[m].length;k++){if(!d(b.to[m][k]))return!1;b.to[m][k]||b.to[m].splice(k,1)}a[c].to=b.to}else a[c].to=[[],[]];if(b.resolution)switch(b.resolution){case 1:case 0.1:case 0.01:case 0.001:case 1E-4:case 1E-5:break;default:return!1}else a[c].resolution=0.01;if(!b.mark)a[c].mark=".";else if("."!==b.mark&&","!==b.mark)return!1;
return!0}},slide:{t:function(a){return"function"===typeof a}},set:{t:function(a,c){return d.slide.t(a,c)}},block:{t:function(a,c){return d.slide.t(a,c)}},step:{t:function(a,c,d){a=parseFloat(a);c[d]=a;return k(a)}}};f.each(d,function(b,d){var e=a[b],f=e||0===e;if(d.r&&!f||f&&!d.t(e,a,b))throw console&&console.log&&console.group&&(console.group("Invalid noUiSlider initialisation:"),console.log("Option:\t",b),console.log("Value:\t",e),console.log("Slider(s):\t",c),console.groupEnd()),new RangeError("noUiSlider");
})}function D(a,c){a=a.toFixed(c.decimals);return a.replace(".",c.serialization.mark)}function E(a,c,d){if(c)return!1;var b=a.data("target");b.hasClass(e[14])||(d||(b.addClass(e[15]),setTimeout(function(){b.removeClass(e[15])},600)),b.addClass(e[14]),n(a.data("options").block,b));return!1}function u(a,c,d){var b=a.data("options"),h=a.data("base"),f=h.data("handles"),g,t=a[0].gPct();c=0>c?0:100<c?100:c;if(!k(c)||c===t)return!1;b.step&&(g=100*b.step/(b.range[1]-b.range[0]),c=Math.round(c/g)*g);if(c===
t)return!1;1<f.length&&(a[0]===f[1][0]?(g=f[0][0].gPct()+b.margin,c=c<g?g:c):(g=f[1][0].gPct()-b.margin,c=c>g?g:c));c=0>c?0:100<c?100:c;if(c===t)return E(h,d,!b.margin);h.data("target").removeClass(e[14]);a.css(a.data("style"),c+"%");a[0]===f[0][0]&&a.children("."+e[2]).toggleClass(e[13],50<c);b.direction&&(c=100-c);a.data("store").val(D(c*(b.range[1]-b.range[0])/100+b.range[0],b));return!0}function F(a,c,d){if(s(c)){var b=[];a.data("options").direction&&(d=d?0:1);c.each(function(){p("change",f(this),
B,{target:a.data("target"),handle:a,which:d},!0);b.push([f(this),"val"])});return b}"string"===typeof c&&(c=[f('<input type="hidden" name="'+c+'">').appendTo(a).addClass(e[3]).change(function(a){a.stopPropagation()}),"val"]);return[c]}function G(a,c,d){var b=[];f.each(d.to[c],function(e){b=b.concat(F(a,d.to[c][e],c))});return{element:a,elements:b,target:a.data("target"),val:A}}function H(a){var c=this.base,d;"left"===this.handle.data("style")?(a=a.pointX-this.startEvent.pointX,d=c.width()):(a=a.pointY-
this.startEvent.pointY,d=c.height());a=this.position+100*a/d;u(this.handle,a)&&n(c.data("options").slide,c.data("target"))}function I(a){this.handle.children("."+e[2]).removeClass(e[4]);a.cursor&&v.css("cursor","").off(q);w.off(q);this.target.removeClass(e[14]).change();n(this.handle.data("options").set,this.target)}function J(a){this.handle.children("."+e[2]).addClass(e[4]);a.stopPropagation();p(r.move,w,H,{startEvent:a,position:this.handle[0].gPct(),base:this.base,target:this.target,handle:this.handle});
p(r.end,w,I,{base:this.base,target:this.target,handle:this.handle});a.cursor&&(v.css("cursor","default"),v.on("selectstart"+q,function(){return!1}))}function K(a){if(!this.base.find("."+e[4]).length){var c,d,b=this.base;d=b.data("handles");var f=d[0].data("style");a=a["left"===f?"pointX":"pointY"];var l="left"===f?b.width():b.height(),g=[],k=b.offset();for(c=0;c<d.length;c++)g.push(d[c].offset());c=1===d.length?0:(g[0][f]+g[1][f])/2;d=1===d.length||a<c?d[0]:d[1];b.addClass(e[5]);setTimeout(function(){b.removeClass(e[5])},
300);u(d,100*(a-k[f])/l);n([d.data("options").slide,d.data("options").set],b.data("target"));b.data("target").change()}}function L(){var a=f(this).data("base"),c=[];f.each(a.data("handles"),function(){c.push(f(this).data("store").val())});return 1===c.length?c[0]:a.data("options").direction?c.reverse():c}function M(a,c){f.isArray(a)||(a=[a]);return this.each(function(){var d=Array.prototype.slice.call(f(this).data("base").data("handles"),0),b=d[0].data("options"),e,l;1<d.length&&(d[2]=d[0]);b.direction&&
a.reverse();for(l=0;l<d.length;l++)if(e=a[l%2],null!==e&&void 0!==e){"string"===f.type(e)&&(e=e.replace(",","."));var g=b.range;e=parseFloat(e);e=100*(0>g[0]?e+Math.abs(g[0]):e-g[0])/(g[1]-g[0]);b.direction&&(e=100-e);u(d[l],e,!0)||d[l].data("store").val(!0);!0===c&&n(b.set,f(this))}})}var w=f(document),v=f("body"),q=".nui",N=f.fn.val,e="noUi-base noUi-origin noUi-handle noUi-input noUi-active noUi-state-tap noUi-target -lower -upper noUi-connect noUi-vertical noUi-horizontal noUi-background noUi-z-index noUi-block noUi-state-blocked noUi-rtl".split(" "),
r=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"};f.fn.val=function(){return this.hasClass(e[6])?arguments.length?M.apply(this,arguments):L.apply(this):N.apply(this,arguments)};return function(a){a=f.extend({handles:2,margin:0,direction:"ltr",orientation:"horizontal"},a)||{};a.serialization=
a.serialization||{};C(a,this);return this.each(function(){var c=f(this).addClass(e[6]),d,b,h=f("<div/>").appendTo(c);d=a.direction;b=[e[0]];var l=[[e[1],e[1]+e[d?8:7]],[e[1],e[1]+e[d?7:8]]],g=[[e[2],e[2]+e[d?8:7]],[e[2],e[2]+e[d?7:8]]];a.connect?(d&&("lower"===a.connect?a.connect="upper":"upper"===a.connect&&(a.connect="lower")),"lower"===a.connect?(b.push(e[9],e[9]+e[7]),l[0].push(e[12])):(b.push(e[9]+e[8],e[12]),l[0].push(e[9]))):b.push(e[12]);var k=a,m=a.serialization.resolution,m=m.toString().split(".");
k.decimals="1"===m[0]?0:m[1].length;"vertical"===a.orientation?b.push(e[10]):b.push(e[11]);h.addClass(b.join(" ")).data({target:c,options:a,handles:[]});c.data("base",h);d&&c.addClass(e[16]);for(d=0;d<a.handles;d++)b=f("<div><div/></div>").appendTo(h),b.addClass(l[d].join(" ")),b.children().addClass(g[d].join(" ")),p(r.start,b.children(),J,{base:h,target:c,handle:b}),b.data({base:h,target:c,options:a,style:"vertical"===a.orientation?"top":"left"}),b.data({store:G(b,d,a.serialization)}),b[0].gPct=
z,h.data("handles").push(b);c.val(a.start);p(r.start,h,K,{base:h,target:c})})}.call(this,x)}})(window.jQuery||window.Zepto);
;/**/
(function(w,undefined){var doc=w.document,docElem=doc.documentElement,classtext="overthrow-enabled",canBeFilledWithPoly="ontouchmove"in doc,overflowProbablyAlreadyWorks="WebkitOverflowScrolling"in docElem.style||(!canBeFilledWithPoly&&w.screen.width>1200)||(function(){var ua=w.navigator.userAgent,webkit=ua.match(/AppleWebKit\/([0-9]+)/),wkversion=webkit&&webkit[1],wkLte534=webkit&&wkversion>=534;return(ua.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&wkLte534||ua.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&w.blackberry&&wkLte534||ua.indexOf(/PlayBook/)>-1&&RegExp.$1>=0&&wkLte534||ua.match(/Fennec\/([0-9]+)/)&&RegExp.$1>=4||ua.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&wkLte534||ua.match(/NokiaBrowser\/([0-9\.]+)/)&&parseFloat(RegExp.$1)===7.3&&webkit&&wkversion>=533);})(),defaultEasing=function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},enabled=false,timeKeeper,toss=function(elem,options){var i=0,sLeft=elem.scrollLeft,sTop=elem.scrollTop,o={top:"+0",left:"+0",duration:100,easing:w.overthrow.easing},endLeft,endTop;if(options){for(var j in o){if(options[j]!==undefined){o[j]=options[j];}}}
if(typeof o.left==="string"){o.left=parseFloat(o.left);endLeft=o.left+sLeft;}
else{endLeft=o.left;o.left=o.left-sLeft;}
if(typeof o.top==="string"){o.top=parseFloat(o.top);endTop=o.top+sTop;}
else{endTop=o.top;o.top=o.top-sTop;}
timeKeeper=setInterval(function(){if(i++<o.duration){elem.scrollLeft=o.easing(i,sLeft,o.left,o.duration);elem.scrollTop=o.easing(i,sTop,o.top,o.duration);}
else{if(endLeft!==elem.scrollLeft){elem.scrollLeft=endLeft;}
if(endTop!==elem.scrollTop){elem.scrollTop=endTop;}
intercept();}},1);return{top:endTop,left:endLeft,duration:o.duration,easing:o.easing};},closest=function(target,ascend){return!ascend&&target.className&&target.className.indexOf("overthrow")>-1&&target||closest(target.parentNode);},intercept=function(){clearInterval(timeKeeper);},enable=function(){if(enabled){return;}
enabled=true;if(overflowProbablyAlreadyWorks||canBeFilledWithPoly){docElem.className+=" "+classtext;}
w.overthrow.forget=function(){docElem.className=docElem.className.replace(classtext,"");if(doc.removeEventListener){doc.removeEventListener("touchstart",start,false);}
w.overthrow.easing=defaultEasing;enabled=false;};if(overflowProbablyAlreadyWorks||!canBeFilledWithPoly){return;}
var elem,lastTops=[],lastLefts=[],lastDown,lastRight,resetVertTracking=function(){lastTops=[];lastDown=null;},resetHorTracking=function(){lastLefts=[];lastRight=null;},finishScroll=function(){var top=(lastTops[0]-lastTops[lastTops.length-1])*8,left=(lastLefts[0]-lastLefts[lastLefts.length-1])*8,duration=Math.max(Math.abs(left),Math.abs(top))/ 8;top=(top>0?"+":"")+top;left=(left>0?"+":"")+left;if(!isNaN(duration)&&duration>0&&(Math.abs(left)>80||Math.abs(top)>80)){toss(elem,{left:left,top:top,duration:duration});}},inputs,setPointers=function(val){inputs=elem.querySelectorAll("textarea, input");for(var i=0,il=inputs.length;i<il;i++){inputs[i].style.pointerEvents=val;}},changeScrollTarget=function(startEvent,ascend){if(doc.createEvent){var newTarget=(!ascend||ascend===undefined)&&elem.parentNode||elem.touchchild||elem,tEnd;if(newTarget!==elem){tEnd=doc.createEvent("HTMLEvents");tEnd.initEvent("touchend",true,true);elem.dispatchEvent(tEnd);newTarget.touchchild=elem;elem=newTarget;newTarget.dispatchEvent(startEvent);}}},start=function(e){intercept();resetVertTracking();resetHorTracking();elem=closest(e.target);if(!elem||elem===docElem||e.touches.length>1){return;}
setPointers("none");var touchStartE=e,scrollT=elem.scrollTop,scrollL=elem.scrollLeft,height=elem.offsetHeight,width=elem.offsetWidth,startY=e.touches[0].pageY,startX=e.touches[0].pageX,scrollHeight=elem.scrollHeight,scrollWidth=elem.scrollWidth,move=function(e){var ty=scrollT+startY-e.touches[0].pageY,tx=scrollL+startX-e.touches[0].pageX,down=ty>=(lastTops.length?lastTops[0]:0),right=tx>=(lastLefts.length?lastLefts[0]:0);if((ty>0&&ty<scrollHeight-height)||(tx>0&&tx<scrollWidth-width)){e.preventDefault();}
else{changeScrollTarget(touchStartE);}
if(lastDown&&down!==lastDown){resetVertTracking();}
if(lastRight&&right!==lastRight){resetHorTracking();}
lastDown=down;lastRight=right;elem.scrollTop=ty;elem.scrollLeft=tx;lastTops.unshift(ty);lastLefts.unshift(tx);if(lastTops.length>3){lastTops.pop();}
if(lastLefts.length>3){lastLefts.pop();}},end=function(e){finishScroll();setPointers("auto");setTimeout(function(){setPointers("none");},450);elem.removeEventListener("touchmove",move,false);elem.removeEventListener("touchend",end,false);};elem.addEventListener("touchmove",move,false);elem.addEventListener("touchend",end,false);};doc.addEventListener("touchstart",start,false);};w.overthrow={set:enable,forget:function(){},easing:defaultEasing,toss:toss,intercept:intercept,closest:closest,support:overflowProbablyAlreadyWorks?"native":canBeFilledWithPoly&&"polyfilled"||"none"};enable();})(this);/* 5.)
  Placeholder fix across browser implementation
 *! http://mths.be/placeholder v2.0.7 by @mathias */
;(function(f,h,$){var a='placeholder' in h.createElement('input'),d='placeholder' in h.createElement('textarea'),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':b,'blur.placeholder':e}).data('placeholder-enabled',true).trigger('blur.placeholder');return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data('placeholder-enabled')&&l.hasClass('placeholder')?'':m.value},set:function(m,n){var l=$(m);if(!l.data('placeholder-enabled')){return m.value=n}if(n==''){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass('placeholder')){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate('form','submit.placeholder',function(){var l=$('.placeholder',this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value=''})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr('placeholder')&&o.hasClass('placeholder')){if(o.data('placeholder-password')){o=o.hide().next().show().attr('id',o.removeAttr('id').data('placeholder-id'));if(m===true){return o[0].value=n}o.focus()}else{l.value='';o.removeClass('placeholder');l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==''){if(l.type=='password'){if(!p.data('placeholder-textinput')){try{q=p.clone().attr({type:'text'})}catch(n){q=$('<input>').attr($.extend(g(this),{type:'text'}))}q.removeAttr('name').data({'placeholder-password':true,'placeholder-id':o}).bind('focus.placeholder',b);p.data({'placeholder-textinput':q,'placeholder-id':o}).before(q)}p=p.removeAttr('id').hide().prev().attr('id',o).show()}p.addClass('placeholder');p[0].value=p.attr('placeholder')}else{p.removeClass('placeholder')}}}(this,document,jQuery));
;/**/
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return(window.console={});}}());var ScrollFix=function(elem){var startY,startTopScroll;elem=elem||document.querySelector(elem);if(!elem||typeof elem.addEventListener==='undefined')
return;elem.addEventListener('touchstart',function(event){startY=event.touches[0].pageY;startTopScroll=elem.scrollTop;if(startTopScroll<=0)
elem.scrollTop=1;if(startTopScroll+elem.offsetHeight>=elem.scrollHeight)
elem.scrollTop=elem.scrollHeight-elem.offsetHeight-1;},false);};;(function($){var touchStopEvent,touchMoveEvent,touchStartEvent,horizontalDistanceThreshold=30,verticalDistanceThreshold=75,scrollSupressionThreshold=10,durationThreshold=1000;if("ontouchend"in document){touchStopEvent="touchend.cj_swp";touchMoveEvent="touchmove.cj_swp";touchStartEvent="touchstart.cj_swp";}
else{touchStopEvent="mouseup.cj_swp";touchMoveEvent="mousemove.cj_swp";touchStartEvent="mousedown.cj_swp";}
$.fn.touchSwipe=function(cb,prevent){if(prevent)this.data("stopPropagation",true);if(cb)return this.each(swipeBoth,[cb]);}
$.fn.touchSwipeLeft=function(cb,prevent){if(prevent)this.data("stopPropagation",true);if(cb)return this.each(swipeLeft,[cb]);}
$.fn.touchSwipeRight=function(cb,prevent){if(prevent)this.data("stopPropagation",true);if(cb)return this.each(swipeRight,[cb]);}
function swipeBoth(cb){$(this).touchSwipeLeft(cb).touchSwipeRight(cb);}
function swipeLeft(cb){var $this=$(this);if(!$this.data("swipeLeft"))$this.data("swipeLeft",cb);if(!$this.data("swipeRight"))addSwipe($this);}
function swipeRight(cb){var $this=$(this);if(!$this.data("swipeRight"))$this.data("swipeRight",cb);if(!$this.data("swipeLeft"))addSwipe($this);}
$.fn.unbindSwipeLeft=function(){this.removeData("swipeLeft");if(!this.data("swipeRight"))this.unbindSwipe(true);}
$.fn.unbindSwipeRight=function(){this.removeData("swipeRight");if(!this.data("swipeLeft"))this.unbindSwipe(true);}
$.fn.unbindSwipe=function(changeData){if(!changeData)this.removeData("swipeLeft swipeRight stopPropagation");return this.unbind(touchStartEvent+" "+touchMoveEvent+" "+touchStopEvent);}
function addSwipe($this){$this.unbindSwipe(true).bind(touchStartEvent,touchStart);}
function touchStart(event){var time=new Date().getTime(),data=event.originalEvent.touches?event.originalEvent.touches[0]:event,$this=$(this).bind(touchMoveEvent,moveHandler).one(touchStopEvent,touchEnded),pageX=data.pageX,pageY=data.pageY,newPageX,newPageY,newTime;if($this.data("stopPropagation"))event.stopImmediatePropagation();function touchEnded(event){$this.unbind(touchMoveEvent);if(time&&newTime){if(newTime-time<durationThreshold&&Math.abs(pageX-newPageX)>horizontalDistanceThreshold&&Math.abs(pageY-newPageY)<verticalDistanceThreshold){if(pageX>newPageX){if($this.data("swipeLeft"))$this.data("swipeLeft")("left");}
else{if($this.data("swipeRight"))$this.data("swipeRight")("right");}}}
time=newTime=null;}
function moveHandler(event){if(time){data=event.originalEvent.touches?event.originalEvent.touches[0]:event;newTime=new Date().getTime();newPageX=data.pageX;newPageY=data.pageY;if(Math.abs(pageX-newPageX)>scrollSupressionThreshold)event.preventDefault();}}}})(jQuery);(function($){'use strict';var defaults={closeText:'Close',type:null,title:null,headerContent:null,};function GfModal(element,options){this.element=element;this.$element=$(element);this.settings=$.extend({},defaults,options);this.init();}
GfModal.prototype.init=function(){this.$wrapper=$('<section class="modal" role="dialog" tabindex="-1">');this.$bg=$('<section class="modal__bg">');this.$box=$('<section class="modal__box">');this.$header=$('<header class="modal__header">');this.$content=$('<div class="modal__content">');var closeHtml='<button role="button" class="modal__close btn btn--default btn--icon-only-mid">';closeHtml+='<span class="btn__text separator-solid-gray-right">'+this.settings.closeText+'</span>';closeHtml+='<i class="icon icon-close-white-bold"></i></button>';this.$close=$(closeHtml);this.$wrapper.append(this.$bg);this.$wrapper.append(this.$box);this.$box.append(this.$header);this.$box.append(this.$content);this.$header.append(this.$close);this.$content.append(this.$element);if(this.settings.headerContent){this.$header.append(this.settings.headerContent);}
if(this.settings.type){this.$wrapper.addClass('modal--'+this.settings.type);}
if(this.settings.title){this.$header.append('<h2 class="modal__title">'+this.settings.title+'</h2>');}
this.$close.bind('click',this.close.bind(this));$(document.body).append(this.$wrapper);this.$element.trigger('gfModal:init');};GfModal.prototype.open=function(){var self=this;this.$lastFocussed=$(':focus');this.$wrapper.addClass('is-open').attr('aria-hidden',false).focus();$(document.body).css('overflow','hidden').bind('keydown.gfModal',function(e){if(e.keyCode===27){self.close();}});setTimeout(function(){$(document.body).bind('click.gfModal',function(e){if(!$.contains(self.$content[0],e.target)&&!$.contains(self.$header[0],e.target)){self.close();}});},100);this.$element.trigger('gfModal:open');};GfModal.prototype.close=function(){this.$wrapper.removeClass('is-open').attr('aria-hidden',true);$(document.body).css('overflow','visible').unbind('.gfModal');this.$lastFocussed.focus();this.$element.trigger('gfModal:close');};$.fn.gfModal=function(options){return this.each(function(){var instance=$.data(this,'gf-modal');if(!instance){if(!options||typeof options==='object'){$.data(this,'gf-modal',new GfModal(this,options));}}else{if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);instance[options](args);}}});};}(jQuery));(function($){'use strict';var count=0;var defaults={autoHide:false,hideDelay:3000,showDelay:500,showOnHover:true,showOnFocus:true,show:false,distance:15,tipWidth:20,width:null,text:null,content:null,classes:null,visibleClass:'is-visible',flyout:false};function ucFirst(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function GfTooltip(element,options){this.element=element;this.$element=$(element);this.settings=$.extend({},defaults,options);var data=this.$element.data();for(var key in this.settings){if(this.settings.hasOwnProperty(key)){var dataProperty='tooltip'+ucFirst(key);if(data[dataProperty]!==undefined){this.settings[key]=data[dataProperty];}}}
this.init();}
$.extend(GfTooltip.prototype,{init:function(){var id='gf-tooltip-'+count;count++;var classes='gf-tooltip';if(this.settings.classes){classes+=' '+this.settings.classes;}
var $tooltip=$('<div>',{'id':id,'class':classes,'role':'tooltip','aria-hidden':'true'});var $tooltipContent=$('<div>',{'class':'gf-tooltip__content'});var $tooltipTextElement=$('<div>',{'class':'gf-tooltip__text'});var $tooltipTipElement=$('<div>',{'class':'gf-tooltip__tip'});this.$element.attr('aria-describedby',id);$tooltipContent.append($tooltipTextElement);$tooltipContent.append($tooltipTipElement);$tooltip.append($tooltipContent);this.$tooltipElement=$tooltip;this.$tooltipTextElement=$tooltipTextElement;this.$tooltipTipElement=$tooltipTipElement;if(this.settings.flyout){this.$element.append($tooltip);this.$element.css('position','relative');}else{$(document.body).append($tooltip);}
this.prepare();var self=this;$(window).resize(function(){if(self&&self.isVisible){self.updatePosition();}});},reinit:function(options){this.settings=$.extend({},defaults,options);this.prepare();},prepare:function(){this.isVisible=false;if(this.settings.text){this.setText(this.settings.text);}else if(this.settings.content){this.setContent($(this.settings.content));}
if(this.settings.width){this.$tooltipElement.width(this.settings.width);this.width=this.settings.width;}else{this.width=this.$tooltipElement.width();}
this.updatePosition();var self=this;this.$element.unbind('.gfTooltip');var showEvents=[];var hideEvents=[];if(this.settings.showOnHover){showEvents.push('mouseenter.gfTooltip');hideEvents.push('mouseleave.gfTooltip');}
if(this.settings.showOnFocus){showEvents.push('focus.gfTooltip');hideEvents.push('blur.gfTooltip');}
if(showEvents.length){this.$element.bind(showEvents.join(', '),function tooltipEnter(){clearTimeout(self._timeout);if(self.settings.showDelay){self._timeout=setTimeout(function(){self.show();},self.settings.showDelay);}else{self.show();}});}
if(hideEvents.length){this.$element.bind(hideEvents.join(', '),function tooltipLeave(){clearTimeout(self._timeout);if(self.settings.hideDelay){self._timeout=setTimeout(function(){self.hide();},self.settings.hideDelay);}else{self.hide();}});}
this.$element.bind('keydown.gfTooltip',function tooltipKeypress(e){if(e.which===27){clearTimeout(self._timeout);self.hide();}});if(this.settings.show){setTimeout(function(){self.show();},0);}},setText:function(text){this.$tooltipTextElement.text(text);},setContent:function(content){this.$tooltipTextElement.html(content);},show:function(){this.updatePosition();this.$tooltipElement.addClass(this.settings.visibleClass).attr('aria-hidden','false');this.isVisible=true;clearTimeout(this._timeout);if(this.settings.autoHide){var self=this;this._timeout=setTimeout(function(){self.hide();},this.settings.hideDelay);}},hide:function(){clearTimeout(this._timeout);this.$tooltipElement.removeClass(this.settings.visibleClass).attr('aria-hidden','true');this.isVisible=false;},updatePosition:function(){var elementWidth=this.$element.width();var elementHeight=this.$element.height();var offset=this.$element.offset();var distanceLeft=-(this.width / 2)+elementWidth / 2;var delta=Math.min(Drupal.windowSize.width-(offset.left+distanceLeft+this.width),0);if(offset.left+distanceLeft<0){delta=-(offset.left+distanceLeft);}
if(this.settings.flyout){this.$tooltipElement.css({left:elementWidth / 2,bottom:elementHeight,'margin-bottom':this.settings.distance,'margin-left':0-this.width / 2+delta});}else{this.$tooltipElement.css({left:offset.left,bottom:Drupal.windowSize.height-offset.top,'margin-bottom':this.settings.distance,'margin-left':distanceLeft+delta});}
this.$tooltipTipElement.css('margin-left',-delta-this.settings.tipWidth / 2);}});$.fn.gfTooltip=function(options){return this.each(function gfTooltip_master(){var tooltip=$.data(this,'gfTooltip');if(!tooltip){if(!options||typeof options==='object'){$.data(this,'gfTooltip',new GfTooltip(this,options));}}else{if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);tooltip[options].apply(this,args);}else{tooltip.reinit(options);}}});};})(jQuery);(function($){'use strict';Drupal.behaviors.gfAccordion={attach:function(context){$('.accordion',context).once('accordion',function(){var $element=$(this),$itemHeaders=$element.find('.accordion__header'),$itemContents=$element.find('.accordion__content');$element.attr('role','tablist');$element.attr('multiselectable','true');$itemHeaders.each(function(index){$(this).attr({'role':'tab','aria-controls':'panel'+index,'id':'tab'+index});});$itemContents.each(function(index){$(this).attr({'role':'tabpanel','aria-labelledby':'tab'+index,'id':'panel'+index});});function toggleItem(header){var $header=$(header),$item=$header.parents('.accordion__item'),$content=$item.find('.accordion__content');if($item.hasClass('is-open')){$header.attr('aria-selected','false');$header.attr('aria-expanded','false');$content.attr('aria-hidden','true');}else{$header.attr('aria-selected','true');$header.attr('aria-expanded','true');$content.attr('aria-hidden','false');}
$item.toggleClass('is-open');}
$element.on('click','.accordion__header',function(){toggleItem(this);});$element.on('keydown','.accordion__header',function(e){if(e.keyCode===13||e.keyCode===0||e.keyCode===32||e.keyCode===27){toggleItem(this);e.preventDefault();}});});}};}(jQuery));(function($){'use strict';Drupal.GFAnalytics=Drupal.GFAnalytics||{};Drupal.GFAnalytics.trackEvent=function(event,callback){if(window.ga){var ga_event={'hitType':'event','eventCategory':event[0],'eventAction':event[1],'transport':'beacon',};if(event[2]){ga_event.eventLabel=event[2];}
if(event[3]){ga_event.eventValue=event[3];}
if(callback){ga_event.hitCallback=callback;}
window.ga('send',ga_event);}
else if(callback){callback();}};Drupal.GFAnalytics.createTracking=function(element){$(element[0]).on('click',function(){Drupal.GFAnalytics.trackEvent([element[1],element[2],element[3]]);});};Drupal.GFAnalytics.createLinkHandler=function(category,name,label){return function(e){var href=this.href;e.preventDefault();if(typeof name==='function'){name=name.call(this);}
if(!label){label=href;}
else if(typeof label==='function'){label=label.call(this);}
Drupal.GFAnalytics.trackEvent([category,name,label],function(){window.location.href=href;});};};Drupal.behaviors.analytics={attach:function(context){$('#primary-nav li li.link-level-2',context).on('click',function(){if($(this).text()==='Subscribe Now'){Drupal.GFAnalytics.trackEvent(['Magazines','subscribe','Nav']);}});var elements=[['#block-views-bbcgf-search-block-3 a','Related blocks','Link','Alternatives'],['#block-views-recipe-views-goeswellwith a','Related blocks','Link','Goes Well With'],['#block-views-bbcgf-search-related-collection a','Related blocks','Link','Recipe Collection'],['#block-views-bbcgf-search-block-2 a','Related blocks','Link','Recipe Collection'],['#block-views-technique-views-using-technique a','Related blocks','Link','Editorial Recipes using this technique'],['#block-views-glossary-views-try-in-these a','Related blocks','Link','Editorial Recipes using this glossary'],['#block-views-bbcgf-search-related-technique a','Related blocks','Link','Guides'],['#block-views-bbcgf-search-related-tech-srch a','Related blocks','Link','Guides'],['#block-views-bbcgf-search-related-glossary a','Related blocks','Link','Glossary'],['#block-views-bbcgf-search-glossary-terms a','Related blocks','Link','Glossary'],['#block-views-bbcgf-search-related-cats-colls a','Related blocks','Link','Recipe Category & Collection'],['#block-views-glossary-views-glossary-terms a','Related blocks','Link','Editorial Glossary'],['#block-menu-menu-seasonal-calendar a','Related blocks','Link','Seasonal Calendar'],['.view-id-bbcgf_seasonal_coming a','Related blocks','Link','Looking forward to'],['button.recipe-header__video-btn','Recipe Video','Open Video in Modal Window','Watch video overlay'],['button.btn--default.inline-video','Recipe Video','Open Video in Modal Window','Watch video button']];for(var i=0;i<elements.length;i++){Drupal.GFAnalytics.createTracking(elements[i]);}
$('.node-home',context).once('analytics',function(){$.scrollDepth({elements:['.field-name-ad-mpu-premium-1','#node_home_full_group_trending','.field-name-ad-mpu-premium-2','.field-name-promotions','.group-breaking-news','.field-name-field-bbcgf-offers','.field-name-field-bbcgf-features','.field-name-field-bbcgf-brand','.group-explore',],percentage:false,userTiming:true,pixelDepth:false});var slidesViewed=1;$('#homepage-carousel').on('click','.flex-direction-nav a, .flex-control-paging a',function(){Drupal.GFAnalytics.trackEvent(['Home: Carousel','Navigation',$(this).text()]);});setTimeout(function(){$('#homepage-carousel').data('flexslider').vars.after=function(){slidesViewed++;Drupal.GFAnalytics.trackEvent(['Home: Carousel','View slide',String(slidesViewed)]);};},1000);$('#homepage-carousel .slides a.hero-slide__title').click(Drupal.GFAnalytics.createLinkHandler('Home: Carousel','Slide 1: Favourite link'));$('#homepage-carousel a.hero-slide__see-more').click(Drupal.GFAnalytics.createLinkHandler('Home: Carousel','Slide 1: See more link'));$('#homepage-carousel .slides li > a:has(.img-container)').click(Drupal.GFAnalytics.createLinkHandler('Home: Carousel',function(){var slideNo=$(this).parents('.slides > li').index();return'Slide '+slideNo+': Image link';}));$('#homepage-carousel .slides .hero-slide__title a').click(Drupal.GFAnalytics.createLinkHandler('Home: Carousel',function(){var slideNo=$(this).parents('.slides > li').index();return'Slide '+slideNo+': Title link';}));$('#homepage-carousel .secondary-recipes a').click(Drupal.GFAnalytics.createLinkHandler('Home: Carousel',function(){var recipeNo=$(this).parents('.head-recipe, .support-recipe').index();return'Slide 1: Sidebar recipe '+recipeNo;}));$('#homepage-carousel .hero-slide__link-list a').click(Drupal.GFAnalytics.createLinkHandler('Home: Carousel',function(){var slideNo=$(this).parents('.slides > li').index(),linkNo=$(this).parents('.link-list > li').index()+1;return'Slide '+slideNo+': Text link '+linkNo;}));$('.search-site-on-page').submit(function(){Drupal.GFAnalytics.trackEvent(['Home: Search','Query',$(this).find('.form-text').val()]);});$('.field-name-field-bbcgf-breaking-news-image a').click(Drupal.GFAnalytics.createLinkHandler('Home: Breaking News','Image link'));$('.field-name-field-bbcgf-breaking-news-title a').click(Drupal.GFAnalytics.createLinkHandler('Home: Breaking News','Title link'));$('.group-breaking-news .field-type-link-field a').click(Drupal.GFAnalytics.createLinkHandler('Home: Breaking News','Text link'));$('.view-bbcgf-popular-recipes a').click(function(){var pos=$(this).index('.view-bbcgf-popular-recipes a')+1;Drupal.GFAnalytics.trackEvent(['Home: Popular Recipes','Link '+pos,this.href]);});$('.view-bbcgf-most-discussed a').click(function(){var pos=$(this).index('.view-bbcgf-most-discussed a')+1;Drupal.GFAnalytics.trackEvent(['Home: Most Discussed','Link '+pos,this.href]);});$('.field-name-field-bbcgf-offers a:has(img)').click(Drupal.GFAnalytics.createLinkHandler('Home: Offers & Promotions','Image link'));$('.field-name-field-bbcgf-offers .field-name-field-bbcgf-item-link a').click(Drupal.GFAnalytics.createLinkHandler('Home: Offers & Promotions','Text link'));$('.field-name-field-bbcgf-features .field-name-field-bbcgf-item-image a').click(Drupal.GFAnalytics.createLinkHandler('Home: Features','Image link'));$('.field-name-field-bbcgf-features .field-name-field-bbcgf-item-title a').click(Drupal.GFAnalytics.createLinkHandler('Home: Features','Title link'));$('.field-name-field-bbcgf-features .field-name-field-bbcgf-item-link a').click(Drupal.GFAnalytics.createLinkHandler('Home: Features','Text link'));$('.field-name-field-bbcgf-brand a:has(img)').click(Drupal.GFAnalytics.createLinkHandler('Home: Brand','Image link'));$('.field-name-field-bbcgf-brand .field-name-field-bbcgf-item-title a').click(Drupal.GFAnalytics.createLinkHandler('Home: Brand','Title link'));$('.field-name-field-bbcgf-brand .field-name-field-bbcgf-item-link a').click(Drupal.GFAnalytics.createLinkHandler('Home: Brand','Text link'));$('.group-explore').on('click','.tabs-list a, .accordion-header',function(){Drupal.GFAnalytics.trackEvent(['Home: Tabs','Change tab',$(this).text()]);});$('.group-explore').on('click','.flex-direction-nav a, .flex-control-paging a',function(){Drupal.GFAnalytics.trackEvent(['Home: Tabs','Slider navigation',$(this).text()]);});$('.group-explore #recipes h2 a').click(Drupal.GFAnalytics.createLinkHandler('Home: Tabs','Recipes text link'));$('.group-explore #recipes a:has(img)').click(Drupal.GFAnalytics.createLinkHandler('Home: Tabs','Recipes image link'));$('.group-explore #member-recipes h2 a').click(Drupal.GFAnalytics.createLinkHandler('Home: Tabs','Member Recipes text link'));$('.group-explore #member-recipes a:has(img)').click(Drupal.GFAnalytics.createLinkHandler('Home: Tabs','Member Recipes image link'));$('.group-explore #techniques h2 a').click(Drupal.GFAnalytics.createLinkHandler('Home: Tabs','Guides & Techniques text link'));$('.group-explore #techniques a:has(img)').click(Drupal.GFAnalytics.createLinkHandler('Home: Tabs','Guides & Techniques image link'));});$('.service-links-link',context).once('analytics').click(function(){Drupal.GFAnalytics.trackEvent(['Share',$(this).data('service-name'),window.location.href]);});$('.view-bbcgf-gifts',context).on('click','.pager-next a',function(){Drupal.GFAnalytics.trackEvent(['Gift Guide','Load More']);});$('#views-exposed-form-bbcgf-gifts-block-1',context).on('change','#edit-gift-category',function(){Drupal.GFAnalytics.trackEvent(['Gift Guide','Category Filter',$(this).val()]);});$('#views-exposed-form-bbcgf-gifts-block-1',context).on('change','#edit-gift-price',function(){Drupal.GFAnalytics.trackEvent(['Gift Guide','Price Range Filter',$(this).val()]);});$('article.node-video.node-full .video-js',context).once('brightcove-play',function(){window.videojs(this.id).one('play',function(){if(this.mediainfo.name){Drupal.GFAnalytics.trackEvent(['Video Play',this.mediainfo.name,'0']);}});});$('.featured-videos .video-js',context).once('brightcove-play',function(){window.videojs(this.id).one('play',function(){if(this.mediainfo.name){Drupal.GFAnalytics.trackEvent(['Homepage: Video Play',this.mediainfo.name,'0']);}});});$('.section-box--related-recipe-carousel .section-box--interstitial--swiper').on('click','a',function(){var slideNo=$(this).parents('article.vertical-push-item--carousel').index();var name='Slide '+(slideNo+1);Drupal.GFAnalytics.trackEvent(['Recipe: Carousel',name]);});$('.search-content .section-box--interstitial--swiper').on('click','a',function(){var slideNo=$(this).parents('article.vertical-push-item--carousel').index();var name='Slide '+(slideNo+1);Drupal.GFAnalytics.trackEvent(['Search: Carousel',name]);});$('#block-bbcgf-promotions-promotions .node-promotion',context).on('click','a',function(){var action=$(this).closest('.node-promotion').find('.side-bar-link').html();var label='Promo - '+$(this).has('img').length?'Image':$(this).text();Drupal.GFAnalytics.trackEvent(['Editorial promo',action,label]);});}};})(jQuery);(function($){'use strict';GF.Carousel={$elementWrapper:null,$elements:null,rawElements:[],currentState:null,firstRun:true,init:function(){this.$elementWrapper=$('.carousel');this.$elements=$('.flexslider');this.numOfElements=this.$elements.length;if(this.$elements.length>0){this.storeRawCarousel();GF.Carousel.checkBreakpoints();GF.Carousel.firstRun=false;GF.Carousel.autoFocus();}
$('.flexslider').on('touchmove',function(e){e.stopPropagation();});},autoFocus:function(){$('.carousel').on('focus','a',function(){var $li=$(this).closest('.slides > li'),slider=$li.closest('.flexslider').data('flexslider'),target;if(slider===undefined||slider.hasClass('type-6')||slider.hasClass('type-offers_carousel')){return;}
if(slider.hasClass('type-7')){target=$li.index()-1;slider.flexAnimate(Math.floor(target));}
else if(slider.hasClass('type-4')){}
else{target=($li.index()/ slider.count)*slider.pagingCount;slider.flexAnimate(Math.floor(target));}});var $clones=$('li.clone',GF.Carousel.$elementWrapper);if($clones.length>0){$($clones).find('a').attr('tabindex','-1');}},storeRawCarousel:function(){for(var i=0;i<this.numOfElements;i++){GF.Carousel.rawElements.push(GF.Carousel.$elementWrapper.eq(i).html());}},recalibrateElement:function(el){if(GF.Carousel.firstRun!==true){var carIndex=$(GF.Carousel.$elements).index(el),$carWrapper=GF.Carousel.$elementWrapper.eq(carIndex);$carWrapper.html(GF.Carousel.rawElements[carIndex]);$carWrapper=GF.Carousel.$elementWrapper.eq(carIndex);GF.Carousel.$elements=$('.flexslider');return $carWrapper.children('.flexslider');}},checkBreakpoints:function(){if(GF.ResponsiveControl.newBreakpoint<480){if(GF.Carousel.currentState!=='mobile'){GF.Carousel.checkCarousels('mobile');GF.Carousel.currentState='mobile';}}
else{if(GF.Carousel.currentState!=='fullwidth'){GF.Carousel.checkCarousels('fullwidth');GF.Carousel.currentState='fullwidth';}}},checkCarousels:function(state){var i,type,el;for(i=0;i<this.numOfElements;i++){el=GF.Carousel.$elements.eq(i);type=el.data('type');if(el.is(':visible')){if(GF.Carousel.firstRun){this.setupType(el,type,state);}
else{this.checkCarouselState(el,type,state);}}}},checkCarouselState:function(el,type,state){switch(type){case 1:case 2:var recalEl=GF.Carousel.recalibrateElement(el);this.setupType(recalEl,type,state);break;case 3:case 4:case 5:case 7:break;case 6:el=GF.Carousel.recalibrateElement(el);if(state==='mobile'){GF.Carousel.showHideToggle.setup(el);}
else{this.setupType(el,type,state);}
break;case'editorial_offers':GF.Carousel.setupType(el,type,state);break;}},setupType:function(el,type,state){switch(type){case 1:if(state==='mobile'){el.flexslider({animation:'slide',controlNav:false,slideshow:false,animationLoop:false,minItems:3,maxItems:5,itemWidth:162,itemMargin:10,touch:true,keyboard:true,start:this.loadChecks});}
else{el.flexslider({animation:'slide',slideshow:false,minItems:3,maxItems:5,itemWidth:162,itemMargin:10,touch:true,keyboard:true,start:this.loadChecks});}
break;case 2:if(state==='mobile'){el.flexslider({animation:'slide',controlNav:false,slideshow:false,animationLoop:false,minItems:2,maxItems:3,itemWidth:230,itemMargin:0,touch:true,keyboard:true,start:this.loadChecks});}
else{el.flexslider({animation:'slide',slideshow:false,minItems:2,maxItems:3,itemWidth:230,itemMargin:0,touch:true,keyboard:true,start:this.loadChecks});}
break;case 4:el.flexslider({animation:'slide',slideshow:false,controlNav:false,touch:true,keyboard:true,minItems:1,maxItems:2,itemWidth:768,itemMargin:0,move:0,start:this.loadChecks});break;case 5:el.flexslider({animation:'slide',slideshow:false,touch:true,keyboard:true,minItems:1,maxItems:2,itemWidth:1110,itemMargin:0,move:0,start:this.loadChecks});break;case 6:if(state==='mobile'){GF.Carousel.showHideToggle.setup(el);}
else{el.flexslider({animation:'slide',slideshow:false,touch:true,keyboard:true,minItems:1,maxItems:1,itemWidth:1110,itemMargin:0,move:0,start:this.loadChecks});}
break;case 7:el.flexslider({useCSS:true,minItems:1,controlsContainer:'.img-carousel-nav',animation:'slide',animationLoop:true,slideshow:true,slideshowSpeed:14000,animationSpeed:500,pauseOnAction:true,pauseOnHover:true,touch:true,keyboard:true,multipleKeyboard:true,directionNav:true,start:this.loadChecks,before:this.realignHeight});var paused=false,elTop=el.offset().top,slider=el.data('flexslider');GF.SiteSetup.$window.on('resize',function(){GF.Carousel.realignHeight(el,false);elTop=el.offset().top;});GF.SiteSetup.$window.on('scroll',function(){if($(this).scrollTop()>elTop){if(!paused){slider.manualPause=true;slider.manualPlay=false;slider.pause();paused=true;}}
else{if(paused){slider.manualPause=false;slider.manualPlay=true;slider.play();paused=false;}}});break;case'carousel-tips':el.flexslider({useCSS:true,minItems:1,animation:'slide',slideshow:false,animationSpeed:300,touch:true,keyboard:true,multipleKeyboard:true,directionNav:true});break;case'editorial_offers':el.flexslider({useCSS:true,minItems:1,animation:'slide',animationLoop:true,slideshow:true,slideshowSpeed:8000,animationSpeed:300,pauseOnAction:true,pauseOnHover:true,touch:true,keyboard:true,multipleKeyboard:true,directionNav:false,start:GF.Carousel.loadChecks,startAt:0,initDelay:0,itemMargin:40,before:GF.Carousel.realignHeight});break;}},loadChecks:function(el){el.data('loaded',true);el.parents('.accordion-content').not('.active').hide();var $carouselImages=el.find('.adaptive-image');if(GF.AdaptiveImage!==undefined){GF.AdaptiveImage.adaptiveChecker($carouselImages,el);}
if(el.hasClass('type-7')){GF.Carousel.realignHeight(el,true,true);}},realignHeight:function(slider,animate,isCurrentSlide,extraHeight){var newSlideHeight;if(isCurrentSlide){newSlideHeight=slider.find('.flex-active-slide').outerHeight();}
else{newSlideHeight=slider.find('.flex-active-slide').siblings('li').addBack().not('.clone').eq(slider.animatingTo).outerHeight();}
if(animate===undefined){animate=true;}
if(extraHeight){newSlideHeight=newSlideHeight+extraHeight;}
slider.css({'height':newSlideHeight,'overflow':'visible'});},showHideToggle:{setup:function(el){var type=el.data('type'),slides,showButton;el.addClass('showhidetoggle');if(type===6){slides=el.find('.category-list li');slides.slice(4).hide();}
showButton=document.createElement('a');showButton.className='btn btn--default';showButton.innerHTML=el.data('showtext');el.append(showButton);$(showButton).on('click',{element:el,ctype:type,cslides:slides},GF.Carousel.showHideToggle.toggle);},toggle:function(e){if(this.innerHTML===e.data.element.data('showtext')){e.data.cslides.show();this.innerHTML=e.data.element.data('hidetext');if(GF.AdaptiveImage!==undefined){GF.AdaptiveImage.adaptiveChecker();}}
else{e.data.cslides.slice(4).hide();this.innerHTML=e.data.element.data('showtext');GF.SiteSetup.$window.scrollTop(e.data.element.offset().top);}}}};})(jQuery);(function($){function hideFacet($facet){var $content=$facet.find('.facet-content');$content.stop().slideUp();$facet.addClass('facet-hidden');$facet.removeClass('facet-visible');}
function showFacet($facet){var $content=$facet.find('.facet-content');$content.stop().slideDown();$facet.removeClass('facet-hidden');$facet.addClass('facet-visible');}
function toggleFacet($facet){if($facet.hasClass('facet-hidden')){showFacet($facet);}
else{hideFacet($facet);}}
Drupal.behaviors.gfCollapsibleFacets={attach:function(context){$('.block-facetapi',context).once('facet-toggle',function(){var $$=$(this);$$.find('.facet-title').click(function(e){toggleFacet($$);e.stopPropagation();});if($$.hasClass('facet-visible')){$$.find('.facet-content').css('display','block');}});}};}(jQuery));(function($){'use strict';Drupal.behaviors.gfMyGoodFood={attach:function(){$('.view-flag-myrecipes-tab .unflag-action').once('myrecipes-remove').mousedown(function(){var $counter=$('.myrecipes-counter');$counter.text($counter.text()-1);$(this).parents('.node').fadeOut('slow',function(){$(this).remove();});});$('.collection-remove').once('collection-remove').click(function(){var $counter=$('.user-collection-header .count');$counter.text($counter.text()-1);$(this).closest('.node').fadeOut('slow',function(){$(this).remove();});});$('#views-exposed-form-flag-myrecipes-tab-page select').once('myrecipes-sort').change(function(){$(this).parents('form').submit();});}};})(jQuery);(function($){'use strict';var instanceCount=0;Drupal.behaviors.gfInlineVideo={attach:function(context){$('.inline-video',context).once('inline-video',function(){var $el=$(this),modalInitialized=false,videoId=$el.data('video-id'),playerId=$el.data('player-id'),accountId=$el.data('account-id'),title=$el.data('video-title'),$content=$('<div></div>'),videoPlayerId='inline-video-player-'+instanceCount;instanceCount++;function initModal(){$content.gfModal({closeText:Drupal.t('Close Video'),type:'video',title:title});$content.bind('gfModal:close',removeVideo);$content.bind('webkitendfullscreen',function(){removeVideo();$content.gfModal('close');});modalInitialized=true;}
function addVideo(){if(modalInitialized===false){initModal();}
var playerHtml='<video id="'+videoPlayerId+'" data-account="'+accountId+'"';playerHtml+=' data-player="'+playerId+'" data-embed="default"';playerHtml+=' data-video-id="'+videoId+'" class="video-js" controls></video>';$content.html(playerHtml).gfModal('open');var script=document.createElement('script');script.src='//players.brightcove.net/'+accountId+'/'+playerId+'_default/index.min.js';document.body.appendChild(script);script.onload=playVideo;}
function removeVideo(){$content.html('');}
function playVideo(){setTimeout(function(){window.videojs(videoPlayerId).ready(function(){this.play();});},500);}
$el.click(function(e){e.preventDefault();addVideo();});});}};})(jQuery);(function($){'use strict';var $navToggle,$touchNav,$touchMenu,$shiftBlocks,$breadcrumb,$iconHome,inner,trail=[];function slideMenu(){$('html').toggleClass('hideoverflow');$touchNav.toggleClass('open');$shiftBlocks.toggleClass('inview');if($('html').hasClass('hideoverflow')){GF.SiteSetup.$scrollWrapper.on('click.bodyToggle',slideMenu).touchSwipeLeft(slideMenu);inner.style.WebkitOverflowScrolling='touch';new ScrollFix(inner);$touchNav.touchSwipeLeft(slideMenu);}else{window.setTimeout(function(){inner.style.WebkitOverflowScrolling='';},200);GF.SiteSetup.$scrollWrapper.off('click.bodyToggle touchmove').unbindSwipeLeft();}}
function updateTrail(){if(trail.length){var $currentItem=trail[trail.length-1];$iconHome.removeClass('visible');$touchMenu.find('.menu').hide();for(var i=0;i<trail.length;i++){trail[i].find('.menu:first').show();}
var $breadcrumbLink=$currentItem.find('a:first').clone();$breadcrumbLink.children('i').attr('class','touch-navigation__arrow-left');$breadcrumb.addClass('visible');$breadcrumb.html($breadcrumbLink);}else{$breadcrumb.removeClass('visible');$iconHome.addClass('visible');}
$touchMenu[0].className='menu is-level-'+trail.length;}
Drupal.behaviors.BBCGFTouchNaviagtion={attach:function(){$navToggle=$('#menu-button, #mobile-nav-header__close');$touchNav=$('#nav-touch');$touchMenu=$touchNav.find('.menu:first');$shiftBlocks=$('.page-header-touch, #scroll-wrapper, .cookie-law, .page-header-touch');$breadcrumb=$('.breadcrumb-item');$iconHome=$('.logo-mobile-menu');inner=document.getElementById('nav-touch-inner');$touchNav.once('touch-navigation',function(){$touchNav.find('li:has(.menu)').find('a:first').append('<i class="touch-navigation__arrow-right"></i>');$touchNav.on('click','a',function(e){var $item=$(this).parent();if($item.find('.menu').length){trail.push($item);updateTrail();e.preventDefault();e.stopPropagation();}});$breadcrumb.on('click','a',function(e){trail.pop();updateTrail();e.preventDefault();e.stopPropagation();});$navToggle.click(function(e){slideMenu();e.preventDefault();e.stopPropagation();});$touchMenu.find('.menu').hide();});}};function subNav(el,visibility){var $this=$(el),$subNav=$this.find('.dd-wrap'),isInactive=$subNav.parent().hasClass('inactive');if(!isInactive){if(visibility==='show'){$subNav.removeClass('element-invisible').stop().fadeTo(250,1);}else if(visibility==='hide'){$subNav.stop().fadeTo(250,0,function(){$(this).addClass('element-invisible');});}}}
Drupal.behaviors.gfDropdownNaviagtion={attach:function(){var $topLevelItems=$('.primary-nav li');$('.primary-nav').once('dropdown-navigation',function(){$(document).one('mousemove',function(){var menuTimeout;$topLevelItems.on('mouseenter',function(){var el=this;menuTimeout=setTimeout(function(){subNav(el,'show');},150);}).on('mouseleave',function(){window.clearTimeout(menuTimeout);subNav(this,'hide');});});$topLevelItems.each(function(){var hideTimeout,el=this;$(this).on('focus','a',function(){window.clearTimeout(hideTimeout);subNav(el,'show');}).on('blur','a',function(){window.clearTimeout(hideTimeout);hideTimeout=setTimeout(function(){subNav(el,'hide');},150);});});$topLevelItems.keydown(function(e){if(e.keyCode===37){$(this).prevAll(':visible:first').find('a:first').focus();}else if(e.keyCode===39){$(this).nextAll(':visible:first').find('a:first').focus();}});var hideTimeout;$('.user-menu').on('focus','a,:input',function(){window.clearTimeout(hideTimeout);$('.user-menu .hover-saver').addClass('is-focused');}).on('blur','a,:input',function(){hideTimeout=setTimeout(function(){$('.user-menu .hover-saver').removeClass('is-focused');},150);});});}};}(jQuery));(function($){GF.Quiz={init:function(){this.$quizCheckQuestionWrapper=$('.node-quiz .question-wrapper .form-type-checkbox label');this.$quizCheckQuestionWrapper.on('click',function(){if($(this).parent().parent().hasClass('selected')){$(this).parent().parent().removeClass('selected');}
else{var $questionWrapper=$(this).closest('.question-wrapper');var neverScore=$questionWrapper.attr('class');var $neverScoreArray=neverScore.split(' ');$.each($neverScoreArray,function(key,value){if(value.indexOf('never-')===0){neverScore=value;neverScore=neverScore.replace('never-','');}});if($(this).prev().val()===neverScore){this.$checkedSelectedAnswers=$('.node-quiz .question-wrapper .form-type-checkbox.selected');this.$checkedSelectedAnswers.each(function(){$(this).removeClass('selected');});}
else{var $neverAnswer=$('.node-quiz .question-wrapper .form-type-checkbox.selected [value="'+neverScore+'"]');$neverAnswer.parent().parent().removeClass('selected');}
$(this).parent().parent().addClass('selected');}});this.$quizRadioQuestionWrapper=$('.node-quiz .question-wrapper .form-type-radio');this.$quizRadioQuestionWrapper.on('change',function(){this.$radioAnswersWrapper=$(this).closest('.form-type-radios');this.$radioSelectedAnswers=this.$radioAnswersWrapper.find('.form-type-radio.selected');this.$radioSelectedAnswers.each(function(){$(this).removeClass('selected');});$(this).addClass('selected');});if($('.node-quiz .question-wrapper').length){this.$quizSelectedAnswers=$('.node-quiz .question-wrapper .form-type-checkbox input:checked');this.$quizSelectedAnswers.each(function(){$(this).parent().parent().addClass('selected');});}},};GF.Quiz.init();}(jQuery));(function($){'use strict';Drupal.behaviors.gfRatingToggle={attach:function(context){$('.rating-toggle',context).once('rating-toggle',function(){var $this=$(this);$('.rating-toggle__toggle',context).click(function(e){e.preventDefault();if(Drupal.windowSize.width<=820){$this.toggleClass('is-shown');}});$this.mouseover(function(){if(Drupal.windowSize.width>=821){$this.addClass('is-shown');}});$this.mouseout(function(){if(Drupal.windowSize.width>=821){$this.removeClass('is-shown');}});});}};})(jQuery);(function($){'use strict';Drupal.behaviors.gfResponsiveTabs={attach:function(context){$('.responsive-tabs',context).once('responsive-tabs',function(){var self=this;$('.responsive-tabs__tab a',this).click(function(e){e.preventDefault();$('.responsive-tabs__tab',self).removeClass('is-active');$(this).parent().addClass('is-active');var order=$(this).parent().index();$('.responsive-tabs__pane',self).removeClass('is-active');$('.responsive-tabs__pane',self).eq(order).addClass('is-active');});});}};})(jQuery);(function($){'use strict';Drupal.GF=Drupal.GF||{};var $window=$(window);if(window.Drupal===undefined){window.Drupal={};}
Drupal.behaviors.GoodFoodCommonBehaviors={attach:function(context){Drupal.GF.commonShowMore(context);}};GF.SiteSetup={path:'/sites/all/themes/bbcw_goodfood/',w:window,$window:$(window),$html:$('html'),$body:$('body'),$scrollWrapper:$('#scroll-wrapper'),$mainContainer:$('#container'),$shiftBlocks:$('.page-header, #scroll-wrapper'),$header:$('.page-header'),init:function(){if(GF.Utils.Tooltip!==undefined){GF.Utils.Tooltip.init();}
GF.Logo.init();if(GF.PrimaryNav!==undefined){GF.PrimaryNav.init();}
if(GF.Search!==undefined){GF.Search.init();}
if(GF.Carousel!==undefined){GF.Carousel.init();}
if(GF.Recipe!==undefined&&GF.Recipe.$recipeHeader.length!==0&&GF.Recipe.firstRun===true){GF.Recipe.checkBreakpoints();}
GF.Accordion.init();GF.ResponsiveControl.init();$('[placeholder]').placeholder();GF.Utils.unFixNav();GF.Utils.externalLinks();GF.Utils.killLinks();GF.Utils.scrollableSet();if($('.feedback-wrapper').length){window.setInterval(function(){$('.feedback-wrapper').addClass('animateStripe');window.setTimeout(function(){$('.feedback-wrapper').removeClass('animateStripe');},650);},10000);}
GF.Cookies.init();GF.Popup.init();}};GF.ResponsiveControl={$currentWindow:$(window),$breakpointTest:null,currentWindowSize:0,currentBreakPoint:0,newBreakPoint:1,isMobile:false,isTouch:false,isMQ:false,isOldIE:false,hasTransitions:false,interactionEventType:'click',transformType:'',W3CDOM:(document.createElement&&document.getElementsByTagName),init:function(){var breakpointTest=document.createElement('div');breakpointTest.setAttribute('id','breakpoint-test');GF.SiteSetup.$body[0].appendChild(breakpointTest);GF.ResponsiveControl.$breakpointTest=$('#breakpoint-test');this.checkState();if(GF.ResponsiveControl.isOldIE){GF.Utils.zebraStripe();}
this.$currentWindow.on('resize',function(){GF.ResponsiveControl.currentWindowSize=document.documentElement.clientWidth;GF.ResponsiveControl.getNewBreakPoint();$('.adsense').hide();});this.$currentWindow.trigger('resize');var adsenseHidden=false;this.$currentWindow.bind('resize orientationchange',function(){if(!adsenseHidden){$('.adsense-ads').hide();adsenseHidden=true;}});},checkState:function(){if(GF.SiteSetup.$body.hasClass('mobile')){this.isMobile=true;}
if(GF.SiteSetup.$html.hasClass('touch')){this.isTouch=true;}
if(GF.SiteSetup.$html.hasClass('mediaqueries')){this.isMQ=true;}
if(GF.SiteSetup.$html.hasClass('lt-ie9')){this.isOldIE=true;}
if(GF.SiteSetup.$html.hasClass('csstransforms3d')){this.hasTransitions=true;this.transformType='3d';}
if(GF.SiteSetup.$html.hasClass('touch')){this.interactionEventType='touchend';}},getNewBreakPoint:function(){GF.ResponsiveControl.newBreakpoint=parseInt(GF.ResponsiveControl.$breakpointTest.css('zIndex'),10);GF.ResponsiveControl.checker();},checker:function(){if(GF.ResponsiveControl.currentBreakpoint!==GF.ResponsiveControl.newBreakpoint){if(GF.ResponsiveControl.currentBreakpoint!==undefined){GF.AdaptiveImage.adaptiveChecker();}
if(GF.ResponsiveControl.newBreakpoint>=769&&!(GF.ResponsiveControl.isTouch)){GF.Logo.switchLogo('large');}
else{GF.Logo.switchLogo('small');}
if(GF.Search!==undefined&&GF.SiteSetup.$header.length>0){GF.Search.reset();}
if(GF.PrimaryNav!==undefined){GF.PrimaryNav.checkBreakpoints();}
if(GF.Carousel!==undefined&&GF.Carousel.firstRun!==true){GF.Carousel.checkBreakpoints();}
if(GF.Tab!==undefined){GF.Tab.checkBreakpoints();}
if(GF.Search!==undefined){GF.Search.checkBreakpoints();}
if(GF.SearchFilters!==undefined){GF.SearchFilters.checkBreakpoints();}
if(GF.Recipe!==undefined&&GF.Recipe.$recipeHeader.length!==0){GF.Recipe.checkBreakpoints();}
if(GF.Comments!==undefined){GF.Comments.checkBreakpoints();}
if($('.betahome').length){}
GF.ResponsiveControl.currentBreakpoint=GF.ResponsiveControl.newBreakpoint;}}};GF.DomController={reAlignElement:function(element,moveTo,position){var moveCheck=this.isCorrectPosition(element,moveTo,position);if(moveCheck){return false;}
else{this.moveElementTo(element,moveTo,position);}
var elementId=element[0].id;if(elementId!==''){var flipAttr=(document.getElementById(elementId).getAttribute('data-mobilepos')?'true':false);document.getElementById(elementId).setAttribute('data-mobilepos',flipAttr);}},isCorrectPosition:function(element,moveTo,position){switch(position){case'before':return element.next().is(moveTo);case'after':return element.prev().is(moveTo);case'insideTop':case'insideBottom':return element.parent().is(moveTo);}
return false;},moveElementTo:function(element,moveTo,position){switch(position){case'before':moveTo.before(element);break;case'after':moveTo.after(element);break;case'insideTop':moveTo.prepend(element);break;case'insideBottom':moveTo.append(element);break;}},isActive:function($element){if($element.hasClass('active')){return true;}
else{return false;}}};GF.AdaptiveImage={init:function(w){if(w.addEventListener){w.addEventListener('DOMContentLoaded',function(){GF.AdaptiveImage.adaptiveChecker();w.removeEventListener('load',GF.AdaptiveImage.adaptiveChecker,false);},false);w.addEventListener('load',GF.AdaptiveImage.adaptiveChecker,false);}
else if(document.attachEvent){w.attachEvent('onload',function(){GF.AdaptiveImage.adaptiveChecker();});}},adaptiveChecker:function(elements,el){var ps=elements||GF.SiteSetup.w.document.getElementsByTagName('div'),imgPath;for(var i=0,il=ps.length;i<il;i++){if(ps[i].getAttribute('data-adaptive')!==null&&!$(ps[i]).is(':hidden')){var selected_breakpoint='max',breakpoints=ps[i].getAttribute('data-adaptive-image-breakpoints');if(breakpoints){breakpoints=breakpoints.split(' ');for(var j=0,br=breakpoints.length;j<br;j++){if(document.documentElement.clientWidth<=Number(breakpoints[j])&&(selected_breakpoint==='max'||Number(breakpoints[j])<Number(selected_breakpoint))){selected_breakpoint=breakpoints[j];}}}
imgPath=$(ps[i]).attr('data-img-'+selected_breakpoint);var picImg=ps[i].getElementsByTagName('img')[0];if(imgPath){if(!picImg){picImg=document.createElement('img');picImg.alt=ps[i].getAttribute('data-alt');ps[i].appendChild(picImg);}
picImg.src=imgPath;}
else if(picImg){ps[i].removeChild(picImg);}}}
if(el){$(window).load(function(){GF.Carousel.realignHeight(el,true,true);});}}};GF.Logo={$element:$('#main-gf-logo'),$image:null,smallPath:$('#main-gf-logo').find('#logo-image').data('small-logo'),largePath:$('#main-gf-logo').find('#logo-image').data('big-logo'),init:function(){GF.Logo.smallPath=Drupal.settings.basePath+GF.Logo.smallPath;GF.Logo.largePath=GF.Logo.largePath;GF.Logo.$image=GF.Logo.$element.find('img');},switchLogo:function(size){if(GF.Logo.$image.length!==0){if(size==='small'){GF.Logo.$image[0].src=GF.Logo.smallPath;}
else if(size==='large'){GF.Logo.$image[0].src=GF.Logo.largePath;}}}};GF.MobileHeader={addTitle:function(){var headerTitle=document.createElement('h2'),$headerTitle=$(headerTitle),$pageTitle=$('h1'),currentTitleText=$pageTitle.text();headerTitle.innerHTML=currentTitleText;headerTitle.className='header-title';GF.SiteSetup.$header.after(headerTitle);$headerTitle.hide();$(window).scroll(function(){var offsetTop=$pageTitle.offset().top;if(offsetTop<50&&$headerTitle.not(':visible')){$headerTitle.slideDown();}
else if(offsetTop>50&&$headerTitle.is(':visible')){$headerTitle.slideUp();}});}};GF.Utils={unFixNav:function(){if(GF.ResponsiveControl.isTouch){$('input[type=text], input[type=password], textarea').not('#edit-search-phrase').on('focus',function(){GF.SiteSetup.$header.css('position','absolute');}).on('blur',function(){GF.SiteSetup.$header.css('position','fixed');});}},zebraStripe:function(){$('.results-list > li:even, .table-striped tr:odd').addClass('odd');},scrollableSet:function(){var scrollable=document.getElementById('scrollable-section');if(scrollable){new ScrollFix(scrollable);}},Tooltip:{init:function(){$('.tooltip > a').on('click',function(e){e.preventDefault();var $this=$(this);if($this.hasParent('.recipe-header__details-first')||$this.hasParent('.comment-section-header')){if(GF.ResponsiveControl.isTouch){GF.Utils.Tooltip.toggle($this);}}
else{if(GF.ResponsiveControl.newBreakpoint<768||GF.ResponsiveControl.isTouch||$this.closest('.tooltip').hasClass('tooltip-click')){GF.Utils.Tooltip.toggle($this);GF.Utils.Tooltip.bindClickClose();}}});},toggle:function($el){var hasHoverSaver=$el.siblings('.hover-saver'),toggleElement;if(hasHoverSaver.length>0){toggleElement=hasHoverSaver.children('.tooltip-content');}
else{toggleElement=$el.siblings('.tooltip-content');}
toggleElement.parents('.tooltip').toggleClass('active');},bindClickClose:function(){$('body').bind('click.tooltip',function(e){if($(e.target).closest('.tooltip-content').length===0){$('.tooltip').removeClass('active');$('body').unbind('click.tooltip');}});}},externalLinks:function(){$('a[rel^="external"]').on('click',function(){window.open($(this).attr('href'));return false;});$('.footer-nav a[href^="http://"]').on('click',function(){window.open($(this).attr('href'));return false;});},killLinks:function(){$('.inactive').on('click',function(e){e.preventDefault();});}};GF.Cookies={init:function(){if(this.hasItem('bbcgf-cookielaw')){return;}
else{GF.SiteSetup.$scrollWrapper.before('<div class="cookie-law bg-turquoise-dark"><div class="container row grid-padding">'+'<a href="" id="cookie-closer" class="cookie-close"><i class="icon-close"></i><span>Close</span></a>'+'<p class="white"><strong>How we use cookies:</strong> This website uses cookies so that we can provide you with the best user experience and to deliver advertising messages and offers on the website that are relevant to you. To read more about the cookies we use and to change your settings see our <a href="/cookies-policy" rel="external" target="_blank">cookies policy</a></p>'+'</div></div>');GF.SiteSetup.$shiftBlocks=GF.SiteSetup.$shiftBlocks.add($('.cookie-law'));}
$('#cookie-closer').on('click',function(e){e.preventDefault();$('.cookie-law').slideUp();GF.Cookies.setItem('bbcgf-cookielaw',true,31536e3,'/');});},getItem:function(sKey){if(!sKey||!this.hasItem(sKey)){return null;}
return unescape(document.cookie.replace(new RegExp('(?:^|.*;\\s*)'+escape(sKey).replace(/[\-\.\+\*]/g,'\\$&')+'\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*'),'$1'));},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return;}
var sExpires='';if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?'; expires=Tue, 19 Jan 2038 03:14:07 GMT':'; max-age='+vEnd;break;case String:sExpires='; expires='+vEnd;break;case Date:sExpires='; expires='+vEnd.toGMTString();break;}}
document.cookie=escape(sKey)+'='+escape(sValue)+sExpires+(sDomain?'; domain='+sDomain:'')+(sPath?'; path='+sPath:'')+(bSecure?'; secure':'');},removeItem:function(sKey,sPath){if(!sKey||!this.hasItem(sKey)){return;}
document.cookie=escape(sKey)+'=; expires=Thu, 01 Jan 1970 00:00:00 GMT'+(sPath?'; path='+sPath:'');},hasItem:function(sKey){return(new RegExp('(?:^|;\\s*)'+escape(sKey).replace(/[\-\.\+\*]/g,'\\$&')+'\\s*\\=')).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,'').split(/\s*(?:\=[^;]*)?;\s*/);for(var nIdx=0;nIdx<aKeys.length;nIdx++){aKeys[nIdx]=unescape(aKeys[nIdx]);}
return aKeys;}};GF.Accordion={init:function(){this.setupHandler();},createAccordion:function(el){var $accordHeader,$accordContent;if(!el.hasClass('accordion')){el.addClass('accordion');$accordHeader=el.find('.tab-header');$accordContent=el.find('.tab-content');$accordHeader.addClass('accordion-header');$accordContent.addClass('accordion-content');}
else{$accordContent=el.find('accordion-content');}
if($accordContent.find('.flexslider').length===0){$accordContent.not(':first').hide();}
else{$accordContent.filter(':first').siblings('.accordion-header').addBack().addClass('active');$accordHeader.find('i')[0].className='arrow-white-down';}},setupHandler:function(){GF.SiteSetup.$mainContainer.on('click.accordiontoggle','.accordion-header',function(){var $this=$(this),$accordContent=$this.siblings('.accordion-content'),$icon=$this.find('i');$accordContent.toggle().siblings('.accordion-header').toggleClass('active');if(GF.AdaptiveImage!==undefined){GF.AdaptiveImage.adaptiveChecker();}
if($icon.hasClass('arrow-white-down')){$icon[0].className='arrow-turquoise';}
else{$icon[0].className='arrow-white-down';}});}};GF.BetaHome={$imageMosiac:$('#image-mosiac'),$betaHeaders:$('#header-fullwidth'),$betaHeader:$('#beta-header'),$betaText:$('#beta-text'),$headerPos:$('#beta-headers'),checkBreakpoints:function(){if(GF.ResponsiveControl.newBreakpoint>=768){GF.DomController.reAlignElement(this.$betaHeader,this.$headerPos,'insideTop');GF.DomController.reAlignElement(this.$betaText,this.$betaHeaders,'after');this.$betaHeader.removeClass('grid-padding');this.$betaText.removeClass('grid-padding');}
else{GF.DomController.reAlignElement(this.$betaHeader,this.$imageMosiac,'before');GF.DomController.reAlignElement(this.$betaText,this.$headerPos,'insideBottom');this.$betaHeader.addClass('grid-padding');this.$betaText.addClass('grid-padding');}}};$(function(){GF.SiteSetup.init();});Drupal.behaviors.GfAdaptiveImage={attach:function(){GF.AdaptiveImage.adaptiveChecker();}};Drupal.behaviors.serviceLinksToggle={attach:function(context){$('.service-links',context).once('service-links-toggle',function(){var $this=$(this),$secondary=$('.service-links-secondary'),$toggle=$(' <a class="service-links-toggle" href="#">+</a>'),open=false;$secondary.after($toggle);$toggle.click(function(e){e.preventDefault();if(open){$this.parent().removeClass('has-secondary');$secondary.removeClass('is-open');$toggle.text('+');}
else{$this.parent().addClass('has-secondary');$secondary.addClass('is-open');$toggle.text('-');}
open=!open;});});}};function openPopup(url,title,w,h){var left=(screen.width / 2)-(w / 2);var top=(screen.height / 2)-(h / 2);return window.open(url,title,'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);}
Drupal.behaviors.serviceLinksPopup={attach:function(context){$('.service-links-link:not(.service-links-email)',context).once('service-links-popup').click(function(e){e.preventDefault();openPopup(this.href,'Share',510,320);});}};Drupal.behaviors.serviceLinksScroll={attach:function(context){$('.service-links',context).once('service-links-scroll',function(){var $this=$(this),$window=$(window),top=$this.offset().top+$this.height(),didScroll=false,didResize=false,isFixed=false;$(window).scroll(function(){didScroll=true;});$(window).resize(function(){didResize=true;});setInterval(function(){if(didScroll){if($window.scrollTop()>top){if(!isFixed){$this.addClass('is-fixed');isFixed=true;}}
else if(isFixed){$this.removeClass('is-fixed');isFixed=false;}
didScroll=false;}
if(didResize){top=$this.offset().top+$this.height();didResize=false;}},100);});}};GF.Popup={init:function(){var popupcookieid=$('.modal').attr('id');if(GF.Cookies.hasItem(popupcookieid)){return;}
else{$('.modal').modal({keyboard:true,show:true});GF.Cookies.setItem(popupcookieid,true,31536e3,'/');}}};Drupal.behaviors.gfPromoFix={attach:function(context){$('[class*="ad--promo"]',context).once('promo-fix',function(){var $this=$(this);var interval=setInterval(function(){var $img=$this.find('img');if($img.length){$img.attr('src',$img.attr('src'));clearInterval(interval);}
else if($this.attr('style')==='display: none;'){clearInterval(interval);}},200);});}};$.fn.gfSubnavNavigation=function(){var $self=this,$navArrows=$('<div>',{'class':'sub-nav__nav-arrows'}),$prev=$('<button class="sub-nav__nav-arrow sub-nav__nav-arrow-left sub-nav__nav-arrow--disabled" disabled></i><span class="element-invisible">'+Drupal.t('Previous')+'</span></button>'),$next=$('<button class="sub-nav__nav-arrow sub-nav__nav-arrow-right"><span class="element-invisible">'+Drupal.t('Next')+'</span></button>'),$subnavList=$self.find('.sub-nav__list'),subnavListOffset=0,subnavListWidth=0;$navArrows.append($prev);$navArrows.append($next);this.append($navArrows);function scroll(direction){var scrollLeft=$subnavList.scrollLeft();var amount=scrollLeft+(subnavListWidth*direction);$subnavList.stop().animate({scrollLeft:amount},250);$subnavList.toggleClass('has-reached-the-end',amount>=scrollLeft);if(amount>=scrollLeft){$self.find('.sub-nav__nav-arrow-right').toggleClass('sub-nav__nav-arrow--disabled').prop('disabled',function(i,v){return!v;});$self.find('.sub-nav__nav-arrow-left').toggleClass('sub-nav__nav-arrow--disabled').prop('disabled',function(i,v){return!v;});}
else{$self.find('.sub-nav__nav-arrow-right').toggleClass('sub-nav__nav-arrow--disabled').prop('disabled',function(i,v){return!v;});$self.find('.sub-nav__nav-arrow-left').toggleClass('sub-nav__nav-arrow--disabled').prop('disabled',function(i,v){return!v;});}}
function checkArrowsNeeded(){$self.toggleClass('has-nav-arrows',$self.width()<subnavListWidth+subnavListOffset);}
$prev.click(function(){scroll(-1);});$next.click(function(){scroll(1);});if($subnavList.length>0){subnavListOffset=$subnavList.position().left;}
$subnavList.children('li').not('.disabled').each(function(){subnavListWidth+=$(this).width();});$(window).resize(Drupal.debounce(checkArrowsNeeded,100));checkArrowsNeeded();return this;};Drupal.behaviors.gfSubNavigation={attach:function(context){$('.sub-nav',context).once('sub-nav').gfSubnavNavigation();}};$.gfFauxBlockLink=function(element,settings){var $this=$(element),$link=$this.find(settings.linkSelector).eq(0),$linkClone=$link.clone(),scrolling=false,scrollTimer,hoverTimer;$linkClone.attr({'class':'faux-block-link',tabindex:-1});$linkClone.click(function(){$link.trigger('click');});$linkClone.hover(function(){clearInterval(hoverTimer);if(!scrolling){$this.addClass('has-faux-block-link-hover');}
else{hoverTimer=setInterval(function(){if(!scrolling){clearInterval(hoverTimer);$this.addClass('has-faux-block-link-hover');}},50);}},function(){clearInterval(hoverTimer);$this.removeClass('has-faux-block-link-hover');});$window.scroll(function(){scrolling=true;clearInterval(scrollTimer);scrollTimer=setInterval(function(){clearInterval(scrollTimer);scrolling=false;},100);});$this.addClass('has-faux-block-link').append($linkClone);};$.fn.gfFauxBlockLink=function(options){var settings=$.extend({linkSelector:'a'},options);return this.each(function(){$.gfFauxBlockLink(this,settings);});};Drupal.behaviors.gfFauxBlockLink={attach:function(context){$('.push-item',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.push-item__title a'});$('.node-push-item',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.push-item__title a'});$('.node-featured',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.featured-item__title a'});$('.category-item',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.category-item--title a'});$('.hero-slide__head-recipe',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.hero-slide__secondary-title a'});$('.hero-slide__support-recipe',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.hero-slide__secondary-title a'});$('.node-carousel-slide',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.vertical-push-item__title a'});$('.node-carousel-slide-narrow',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.vertical-push-item__title a'});$('.recipe-hub__top--carousel--item',context).once('faux-block-link').gfFauxBlockLink({linkSelector:'.recipe-hub__top--carousel--title a'});}};Drupal.behaviors.gfVideoFauxBlockLink={attach:function(context){$('.video-js',context).hover(function(){$(this).addClass('faux-block-link');},function(){$(this).removeClass('faux-block-link');});}};Drupal.behaviors.gfSearchCarousel={attach:function(context){$('.section-box--interstitial--swiper',context).prev().css('background-image','none');}};Drupal.GF.commonSplitString=function(string,max_chars){var array=string.split(' '),count=0,slice=array.length;array.forEach(function(element,index){count+=element.length;if(count<max_chars){slice=index;}});return{0:array.slice(0,slice).join(' '),1:array.slice(slice).join(' ')};};Drupal.GF.commonShowMore=function(context,options){options=options||{};var show_char=options.show_char||70,ellipses_text=options.ellipses_text||'...',more_text=options.more_text||'Show more';$('.show-more__content',context).each(function(){var content=$(this).html();if(content.length>show_char){var split_strig=Drupal.GF.commonSplitString(content,show_char),html=split_strig[0]+'<span class="show-more__ellipses">'+ellipses_text+'</span>&nbsp;'+'<span class="show-more__hidden-content">'+split_strig[1]+'</span>';$(this).html(html).parent().append('<a class="show-more__link" href="#">'+more_text+'</a>');}});$('.show-more__link',context).click(function(e){e.preventDefault();$('.show-more__content',context).parent().addClass('show-more__content--show');});};})(jQuery);(function($){Drupal.GF=Drupal.GF||{};Drupal.behaviors.GoodFoodUnstickLeader={attach:function(context){var $window=$(window),$viewport_width,timeout;Drupal.GF.adsAddEventListeners();$window.on('resize',function(){$viewport_width=$(this).width();if($viewport_width<Drupal.settings.gf_breakpoints.narrow){clearTimeout(timeout);timeout=setTimeout(function(){Drupal.GF.adsStickyLeaderboard(context);},15);}});}};Drupal.GF.adsAddEventListeners=function(){window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];window.googletag.cmd.push(function(){if(window.googletag.apiReady){window.googletag.pubads().addEventListener('slotRenderEnded',Drupal.GF.adsSlotRenderEndedEvent);}});};Drupal.GF.adsSlotRenderEndedEvent=function(event){var slotId=event.slot.getSlotElementId(),width=event.size[0]||0,height=event.size[1]||0,condition_ad_top_slot=(slotId.indexOf('ad-manager-ad-top_slot-')===0&&event.isEmpty===false),condition_ad_top_slot_billboard=(width===300&&height===120),condition_ad_interstitial=(slotId.indexOf('ad-manager-ad-interstitial-')===0&&event.isEmpty===false);if(condition_ad_interstitial||(condition_ad_top_slot&&condition_ad_top_slot_billboard)){$('.ad--top-slot').addClass('not-sticked');}};Drupal.GF.adsStickyLeaderboard=function(context){var $ad_top_slot=$('.ad--top-slot',context),$ad_mpu_premium=$('.ad--mpu-premium-1, .ad--mpu-premium-1-mobile, .ad--mpu-premium-2, .ad--mpu-premium-1-narrow, .ad--mpu-premium-1-single',context),$ad_mpu_premium_visible;if($ad_top_slot.length&&$ad_mpu_premium.length){$(window).on('scroll',function(){if(!$ad_top_slot.hasClass('not-sticked')){$ad_mpu_premium_visible=Drupal.GF.adsIsScrolledIntoView($ad_mpu_premium.eq(0),{'top':40});if($ad_mpu_premium_visible.startView){$ad_top_slot.addClass('is-scrolled-past');}
else{$ad_top_slot.removeClass('is-scrolled-past');}}});}};Drupal.GF.adsIsScrolledIntoView=function(elem,offset){var offset_elem={'top':offset.top||0,'bottom':offset.bottom||0};var $window=$(window),$elem=(elem instanceof jQuery)?elem:$(elem),doc_view_top=$window.scrollTop(),doc_view_bottom=doc_view_top+$window.height(),elem_top=$elem.offset().top+offset_elem.top,elem_bottom=elem_top+$elem.height()+offset_elem.bottom;return{'startView':(doc_view_bottom>=elem_top),'endView':(doc_view_bottom>=elem_bottom),'fullViewDisplayed':((doc_view_bottom>=elem_bottom)&&(doc_view_top<=elem_bottom))};};})(jQuery);(function($){'use strict';Drupal.GF=Drupal.GF||{};$(document).on('flagGlobalAfterLinkUpdate',function(event,data){if(data.flagName==='myrecipes'&&$('.recipe-header__media').size()){$('.recipe-header__media').toggleClass('is-saved');$('.btn--save').toggleClass('is-saved');}});Drupal.behaviors.gfRecipes={attach:function(context){$('.recipe-header__more-info-toggle a',context).once('toggle-recipe',function(){$(this).click(function(e){e.preventDefault();$('.recipe-header__more-info').toggleClass('is-open');$(this).parent().toggleClass('active');});});Drupal.GF.rateShowMessage();Drupal.GF.moveBlocksRecipePage();}};Drupal.GF.rateShowMessage=function(){$(document).bind('eventAfterRate',function(e){var $container,$message=$('<span class="rating-message">Thanks for rating!</span>');if(typeof e.target.firstChild.className!=='undefined'&&e.target.firstChild.className.indexOf('thumbs-up__wrapper')!==-1){$container=$('#'+e.target.id).parent();$message.appendTo($container);}
else{$container=$('.rate-messages');$container.html($message);}
$('.rating-message').delay(2000).fadeOut(1000,function(){$(this).remove();});});};Drupal.GF.moveBlocksRecipePage=function(context){var $alternative_recipes=$('.node-recipe.node-full #block-bbcgf-search-views-bbcgf-cc-alt-recipes'),$all_you_need_for=$('.node-recipe.node-full #block-bbcgf-search-views-bbcgf-cc-rel-features'),$related_guides=$('.node-recipe.node-full #block-bbcgf-search-views-bbcgf-cc-rel-technique'),$goes_well_with=$('.node-recipe.node-full #block-views-recipe-views-goeswellwith'),$advertisement_features=$('.node-recipe.node-full #block-bbcgf-search-views-bbcgf-cc-rtl-native'),$exclusive_offers=$('.node-recipe.node-full .editorial-offers-container'),$region_main_content=$('.node-recipe.node-full .span8'),$region_sidebar=$('.node-recipe.node-full .span4');$(window,context).resize(function(){var $viewport_width=$(window).width();if($viewport_width<Drupal.settings.gf_breakpoints.mid){if($region_main_content.find($alternative_recipes).length===0){$region_main_content.append($alternative_recipes);}
if($region_main_content.find($all_you_need_for).length===0){$region_main_content.append($all_you_need_for);}
if($region_main_content.find($related_guides).length===0){$region_main_content.append($related_guides);}
if($region_main_content.find($goes_well_with).length===0){$region_main_content.append($goes_well_with);}
if($region_main_content.find($advertisement_features).length===0){$region_main_content.append($advertisement_features);}
if($region_main_content.find($exclusive_offers).length===0){$region_main_content.append($exclusive_offers);if(GF.Carousel!==undefined){GF.Carousel.checkCarousels('mobile');}}}
else{if($region_sidebar.find($alternative_recipes).length===0){$region_sidebar.append($alternative_recipes);}
if($region_sidebar.find($all_you_need_for).length===0){$region_sidebar.append($all_you_need_for);}
if($region_sidebar.find($related_guides).length===0){$region_sidebar.append($related_guides);}
if($region_sidebar.find($goes_well_with).length===0){$region_sidebar.append($goes_well_with);}
if($region_sidebar.find($advertisement_features).length===0){$region_sidebar.append($advertisement_features);}
if($region_sidebar.find($exclusive_offers).length===0){$region_sidebar.append($exclusive_offers);}}});};})(jQuery);(function($){'use strict';var $body=$('body'),$window=$(window),$content=$('.search-results'),$back=$('.search-sidebar_header--back'),$headerBar,$countBar,$filterToggle;function openFilters(){$back.bind('click',closeFiltersEvent);$content.bind('wheel mousewheel touchmove',noScrollEvent);$body.addClass('filter-open');}
function closeFilters(){$back.unbind('click',closeFiltersEvent);$content.unbind('wheel mousewheel touchmove',noScrollEvent);$body.removeClass('filter-open');}
function toggleFilters(){if($body.hasClass('filter-open')){closeFilters();}else{openFilters();}}
function closeFiltersEvent(e){e.preventDefault();closeFilters();}
function noScrollEvent(e){e.preventDefault();}
function initForm(){$('.page-header-touch').once('search-form',function(){var $form=$('.search-form').clone(),$field=$form.find('.form-text'),$cancel=$('<a href="#" class="btn btn--search-cancel search-cancel">'+Drupal.t('Cancel')+'</a>'),$user=$('<a href="/user/login" class="page-header-touch__user"></a>'),$toggle=$('<a href="#" class="search-toggle"></a>');$(this).append($form);$toggle.click(function(e){e.preventDefault();$form.addClass('is-open');$field.focus();$('.service-links.is-fixed').hide();});$cancel.click(function(e){e.preventDefault();$form.removeClass('is-open');$('.service-links.is-fixed').show();});$form.before($toggle);$toggle.before($user);$field.parent().parent().after($cancel);});}
function initCount(){if($window.width()<=770){$('.block-facetapi a.facetapi-active, .block-facetapi a.facetapi-inactive').click(function(){toggleFilters();});$('.block-facetapi').each(function(){var $$=$(this);gfHideFacet($$);var count=$$.find('.facetapi-active').size();if(count){var original=$$.find('h3.facet-title').html();$$.find('.facet-title').html(original+' <span class="filter-count">('+count+' selected)</span>');}});var $$=$('.search-sidebar');var count=$$.find('.facetapi-active').size();if(count){var filter=$$.find('.facetapi-active').html();if(count<2){if($$.find('.facetapi-active.search-api-ranges-widget').size()){filter=Drupal.t('Calories');}
$('.filter-toggle').html(Drupal.t('Filter results')+'<span class="filter-toggle-count">('+filter+')<span>').addClass('single');}else{$('.filter-toggle').html(Drupal.t('Filter results')+'<span class="filter-toggle-count">('+count+' selected)<span>').addClass('multiple');}}else{$('.filter-toggle').html(Drupal.t('Filter results')).removeClass('single').removeClass('multiple');}
$countBar=$('.search-current-results');$headerBar.find('.block-current-search').remove();$countBar.append($('.block-current-search'));}}
function initAjax(){$('body form[action*="search"], body form[action*="search_api_ajax/search"]').die('submit');$('body form[action*="search/recipes"], body form[action*="search_api_ajax/search/recipes"]').die('submit');$('body a[href^="/search"], body a[href^="/search_api_ajax/search"]').die('click');$('body a[href^="/search/recipes"], body a[href^="/search_api_ajax/search/recipes"]').die('click');$('.use-ajax-links a[href^="/search"], .use-ajax-links a[href^="/search_api_ajax/search"], #search-results .pager a[href^="/search"], #search-results .pager a[href^="/search_api_ajax/search"]').once('gf-search-ajax-processed').click(function(){if($('.view-bbcgf-search .page404').length){return true;}else{return Drupal.search_api_ajax.navigateUrl($(this).attr('href'));}});}
function initTracking(){var queryDelay;$('.search-form').submit(function(){var label=$(this).find('.form-text').val();clearTimeout(queryDelay);queryDelay=setTimeout(function(){track('Query',label);},10);});$('a.facetapi-inactive').click(function(){var $this=$(this),label=this.firstChild.nodeValue.split(' (')[0],filter=$this.closest('.block-facetapi').find('.facet-title').text().replace(/^\s+/,'').replace(/\s+$/,'');track('Add filter: '+filter,label);});$('a.facetapi-active').click(function(){var $this=$(this),label=this.parentNode.firstChild.nodeValue,filter=$this.closest('.block-facetapi').find('.facet-title').text().replace(/^\s+/,'').replace(/\s+$/,'');track('Remove filter: '+filter,label);});$('.search-enabled-facets a').click(function(){var $this=$(this),label=this.parentNode.firstChild.nodeValue,filter=$('#search-sidebar a[href="'+$this.attr('href')+'"]').closest('.block-facetapi').find('.facet-title').text().replace(/^\s+/,'').replace(/\s+$/,'');if(!filter){filter='Calories';}
track('Remove filter: '+filter,label);});$('.facet-title').click(function(){var label=$(this).text().replace(/^\s+/,'').replace(/\s+$/,''),open=$(this).parent().hasClass('facet-visible'),action=(open)?'Open':'Close';track(action+' filter group',label);});$('.search-api-sorts-wrapper select').change(function(){var label=this.options[this.selectedIndex].text;track('Sort',label);});$('.search-results .pager a').click(function(){track('Navigate page','Pagination: '+this.text);});}
function track(action,label){Drupal.GFAnalytics.trackEvent(['Search',action,label]);}
function initToolbar(){if($('.block-facetapi').length){$body.once('search-header-bar-added').each(function(){$headerBar=$('<div class="search-header-bar"></div>');$('#search-tabs').after($headerBar);$filterToggle=$('<a id="filter-toggle" class="filter-toggle" href="#search-sidebar">'+Drupal.t('Filter results')+'</a>');$filterToggle.click(function(e){e.preventDefault();e.stopPropagation();toggleFilters();});$headerBar.append($filterToggle);new ScrollFix(document.getElementById('search-sidebar'));});}
$headerBar.find('.search-api-sorts-wrapper').remove();$headerBar.append($('.search-api-sorts-wrapper').clone());}
function initSort(){$('.search-api-sorts-wrapper select').once('gf-search-sort-processed').change(function(){var $this=$(this),$link=$this.siblings('.search-api-sorts').find('a.op_'+$this.val()).first();Drupal.search_api_ajax.navigateUrl($link.attr('href'));});}
function gfHideFacet($facet){var $content=$facet.find('.facet-content');$content.stop().slideUp();$facet.addClass('facet-hidden');$facet.removeClass('facet-visible');}
Drupal.behaviors.GFSearch={attach:function(){initForm();initTracking();if($('#search-main').length){initAjax();initToolbar();initSort();initCount();}}};var submitTimeout='';Drupal.behaviors.search_api_ranges={attach:function(){$('div.search-api-ranges-widget').each(function(){var widget=$(this),slider=widget.find('div.range-slider'),text=widget.find('div.range-slider-text'),rangeMin=widget.find('input[name=range-min]'),rangeMax=widget.find('input[name=range-max]'),rangeFrom=widget.find('input[name=range-from]'),rangeTo=widget.find('input[name=range-to]'),prefix=widget.find('input[name=prefix]'),suffix=widget.find('input[name=suffix]'),updateText=function(){text.html(prefix.val()+parseInt(rangeFrom.val(),10)+' to '+parseInt(rangeTo.val(),10)+suffix.val());};if(rangeMin.val()!==rangeFrom.val()||rangeMax.val()!==rangeTo.val()){widget.parent().parent().addClass('facet-visible');widget.parent().css('display','block');widget.addClass('facetapi-active');}
slider.noUiSlider({range:[parseInt(rangeMin.val(),10),parseInt(rangeMax.val(),10)],start:[parseInt(rangeFrom.val(),10),parseInt(rangeTo.val(),10)],step:1,connect:true,serialization:{to:[widget.find('input[name=range-from]'),widget.find('input[name=range-to]')],resolution:1},slide:function(){updateText();clearTimeout(submitTimeout);delaySubmit(widget);}});updateText();});function delaySubmit(widget){var autoSubmitDelay=widget.find('input[name=delay]').val();if(autoSubmitDelay!==undefined&&autoSubmitDelay!==0){submitTimeout=setTimeout(function(){widget.find('form').submit();widget.addClass('facetapi-active');toggleFilters();},autoSubmitDelay);}}
if(Drupal.search_api_ajax){Drupal.search_api_ajax.navigateRanges=function(path,field,from,to){var state={},query=$('.search-form .form-text').val();if(query){state.query=query;}
var exists=false;if($.bbq.getState('path')){path=$.bbq.getState('path');}
if(path!==undefined&&path!==''){var splitStates=path.split('/');$.each(splitStates,function(index,value){if(index%2===0&&value===field){exists=splitStates[index+1];}});}
var newRange='['+from+' TO '+to+']';if(exists){state.path=path.replace(exists,newRange);}
else if(path!==undefined&&path!==''){state.path=path+'/'+field+'/'+newRange;}
else{state.path=field+'/'+newRange;}
$.bbq.removeState('page');$.bbq.pushState(state);return false;};}}};}(jQuery));(function($){'use strict';var init=false;Drupal.behaviors.gfStepByStep={attach:function(context){var $stepByStep=$('#step-by-step');$('.step-by-step__index-btn',context).once('step-by-step-index-btn').click(function(){$('.step-by-step__index-btn').hide();$stepByStep.addClass('show-index');});$('.step-by-step__index-link').once('step-by-step-index-link').click(function(){var index=parseInt($(this).attr('rel'),10);$stepByStep.removeClass('show-index');$('.step-by-step__slider').flexslider(index);$('.step-by-step__index-btn').show();});$('.step-by-step-btn',context).once('step-by-step-btn').click(function(){if(!init){$stepByStep.gfModal({type:'full-bleed',headerContent:$('.step-by-step__index-btn')});$stepByStep.find('.step-by-step__slider').flexslider({animation:Modernizr.touchevents?'slide':'fade',animationLoop:true,controlNav:true,slideshow:false,itemMargin:0,touch:true,keyboard:true,multipleKeyboard:true,useCSS:false});init=true;}
$stepByStep.gfModal('open');});}};})(jQuery);(function($){'use strict';GF.Tab={$elements:null,tabs:{},numOfElements:0,$selectList:null,init:function(){this.$elements=$('.tabs:not(.tabs-processed)');this.numOfElements=this.$elements.length;this.$selectList=$('.tabs-select-wrapper');if(this.$elements.length>0){GF.Tab.checkBreakpoints();}
this.$elements.addClass('tabs-processed');},checkBreakpoints:function(){var i=0;for(i;i<this.numOfElements;i++){var $currentTab=GF.Tab.$elements.eq(i),$numberOfTabs=$currentTab.find('.tab-header').length,mobileComponentType=$currentTab.data('narrowcomponent')||0;if(GF.Tab.isTabActive(GF.Tab.$elements[i])){if(GF.ResponsiveControl.newBreakpoint<=480&&$numberOfTabs>=3){GF.Tab.hideTab($currentTab);if(mobileComponentType===0){GF.Tab.createSelectList($currentTab);}else if(mobileComponentType===1){GF.Accordion.createAccordion($currentTab);}}else{if(this.$selectList.length>0){this.$selectList.hide();}
GF.Tab.checkForTabs($currentTab);}}else{if($currentTab.children('.tabs-list').length>0){GF.Tab.hideTab($currentTab);}}}
GF.Tab.setupHandlers();},checkForTabs:function($currentTab){if($currentTab.children('.tabs-list').length===0){GF.Tab.createTabs($currentTab);}else{GF.Tab.showTabs($currentTab);}},isTabActive:function(tab){var activeRange=tab.getAttribute('data-tabactive'),activeOperator,activeWidth;if(activeRange!==null){activeOperator=activeRange.substr(0,1);activeWidth=parseInt(activeRange.substr(1),10);}else{activeOperator='>';activeWidth=0;}
if(activeOperator==='>'){return(GF.ResponsiveControl.newBreakpoint>=activeWidth?true:false);}else if(activeOperator==='<'){return(GF.ResponsiveControl.newBreakpoint<=activeWidth?true:false);}},createTabs:function(tab){var $tab=$(tab),tabUL=$('<ul>').addClass('tabs-list'),tabElements=$tab.find('.tab');$.each(tabElements,function(index,element){var anchors=$('<a>').attr({'class':'tab-link','href':'#'+$(element).attr('id'),'data-tabname':$(element).data('tabname')}).html($(this).find('.tab-header').text()),tabsLi=$('<li>').append(anchors);if(tabElements.length>2){tabsLi.addClass('small-tabs');}
tabUL.append(tabsLi).addClass('unstyled');});$tab.prepend(tabUL);GF.Tab.showTabs($tab);},setupHandlers:function(){this.$elements.find('.tab-link').on('click',function(event){event.preventDefault();var activeElementId=$(this).attr('href');$(this).parents('.tabs').find('li').removeClass('active');$(this).parent().addClass('active');GF.Tab.changeTab(activeElementId);});},changeTab:function(tabId){var $newTab=$(tabId),$allTabs=$newTab.parents('.tabs').find('.tab');if($newTab.is(':hidden')){$allTabs.hide().end().end().show();}
if(GF.AdaptiveImage!==undefined){GF.AdaptiveImage.adaptiveChecker();}
var $tabImages=$newTab.find('.adaptive-image');if(GF.AdaptiveImage!==undefined){GF.AdaptiveImage.adaptiveChecker($tabImages);}
if($newTab.find('.flexslider').length>0&&jQuery.flexslider!==undefined){if($newTab.find('.flex-viewport').length===0||$newTab.find('.slides > li').width()===0){GF.Carousel.checkCarousels(GF.Carousel.currentState);}}},resetState:function(el){el.find('.tab, .tab .tab-header').hide();var activeState=GF.Tab.checkActiveState(el);this.changeTab(activeState);this.updateLinkState(activeState);},updateLinkState:function(tabId){$('a[href="'+tabId+'"]').parents('ul').find('li').removeClass('active').end().end().parent('li').addClass('active');},checkActiveState:function(el){var activeState=this.getActiveTab(),$firstTabId='#'+el.find('.tab').first().attr('id');if(activeState!==null){if($(activeState).hasClass('tab')){return activeState;}}
return $firstTabId;},getActiveTab:function(){return window.location.hash||null;},showTabs:function(tab){var $tabs=$(tab);$tabs.find('.tabs-list').show().end().find('.tab, .tab .tab-header').hide().filter('.tab').first().show().end().end().end().find('.tabs-list li').removeClass('active').first().addClass('active');var activeState=GF.Tab.checkActiveState($tabs);this.changeTab(activeState);this.updateLinkState(activeState);},hideTab:function(tab){tab.find('.tabs-list').hide().end().find('.tab, .tab .tab-header').show();},createSelectList:function(el){this.$selectList=$('.tabs-select-wrapper');if(this.$selectList.length===0){var $options,tempOption,tempLink,option,optionList,$optionList,i;$options=el.find('.tab-header');optionList=document.createElement('ul');i=0;for(i;i<$options.length;i++){option=$options[i];tempOption=document.createElement('li');tempLink=document.createElement('a');tempLink.setAttribute('href','#'+option.parentNode.id);tempLink.className='tab-link';tempLink.innerHTML=option.innerHTML;tempOption.appendChild(tempLink);optionList.appendChild(tempOption);}
optionList.className='tabs-select unstyled';GF.Tab.resetState(el);var selectHeaderWrap=document.createElement('div'),selectHeader=document.createElement('h2');selectHeaderWrap.className='tabs-select-wrapper';$optionList=$(optionList);$optionList.find('li a[href="'+GF.Tab.checkActiveState(el)+'"]').parent('li').addClass('active');var headerLink=$optionList.find('.active a').clone().append('<i class="icon"></i>')[0];selectHeader.appendChild(headerLink);selectHeaderWrap.appendChild(selectHeader);selectHeaderWrap.appendChild(optionList);el.prepend(selectHeaderWrap);var $selectHeader=$(selectHeader);$selectHeader.on('click','a',function(e){e.preventDefault();$(this).toggleClass('active');$optionList.toggleClass('active');});$optionList.on('click','a',function(){GF.Tab.changeTab($(this).attr('href'));$selectHeader.html($(this).clone()[0]);$optionList.removeClass('active');});this.$selectList=$('.tabs-select-wrapper');}else{GF.Tab.resetState(el);this.$selectList.show();}}};Drupal.behaviors.gfSelectTabs={attach:function(){$('.select-tabs').once('gf-select-tabs-processed').each(function(){var $this=$(this),$ul=$this.find('ul'),$toggle=$('<a class="tabs-toggle" href="#"></a>');$toggle.text($ul.find('li.active').text().replace('(active tab)',''));$toggle.click(function(e){$ul.addClass('is-open');$('body').click(function(){$ul.removeClass('is-open');});e.preventDefault();e.stopPropagation();});$ul.find('a').click(function(){$toggle.text($(this).text().replace('(active tab)',''));});$ul.before($toggle);});}};Drupal.behaviors.gfTabs={attach:function(){GF.Tab.init();}};})(jQuery);(function($){'use strict';GF.Tools={$weightConversionForm:null,$volumeConversionForm:null,$roastTimer:null,init:function(){this.$weightConversionForm=$('#weight-conversion');this.$volumeConversionForm=$('#volume-conversion');this.$roastTimer=$('#roast-timer');if(this.$weightConversionForm.length>0){this.checkActiveInputs(this.$weightConversionForm);}
if(this.$volumeConversionForm.length>0){this.checkActiveInputs(this.$volumeConversionForm);}
if(this.$roastTimer.length>0){this.roastTimer.setup();}
this.setBindings();},State:{activeForm:null},setBindings:function(){$('input[type="radio"]').on('click',function(){GF.Tools.checkActiveInputs($(this).parents('form'));});this.$weightConversionForm.on('submit',function(e){e.preventDefault();GF.Tools.activeForm=this;GF.Tools.convertWeight();});this.$volumeConversionForm.on('submit',function(e){e.preventDefault();GF.Tools.activeForm=this;GF.Tools.convertVolume();});},convertWeight:function(){if(document.getElementById('weightToMetric').checked){this.convert('pounds','ounces',16,'kilograms','grams',1000,0.453592);}else if(document.getElementById('weightToImperial').checked){this.convert('kilograms','grams',1000,'pounds','ounces',16,2.204624);}else{this.displayError('Please select a conversion type above before trying to convert.');}},convertVolume:function(){if(document.getElementById('volToMetric').checked){this.convert('pint','fluidOunces',20,'litre','millilitres',1000,0.568246);}else if(document.getElementById('volToImperial').checked){this.convert('litre','millilitres',1000,'pint','fluidOunces',20,1.7598);}else{this.displayError('Please select a conversion type above before trying to convert.');}},convert:function(from1,from2,childRate1,to1,to2,childRate2,convertRate){var val1=document.getElementById(from1).value,val2=document.getElementById(from2).value;if(val1!==''&&!$.isNumeric(val1)||val2!==''&&!$.isNumeric(val2)){this.displayError('Ensure you are only trying to convert numbers in this tool.');return false;}else if((val1==='')&&(val2==='')){this.displayError('No values have been entered for us to convert.');return false;}
if(document.getElementById(from1).value===''){document.getElementById(from1).value='0';}
var total=(parseInt(document.getElementById(from1).value,10)+parseFloat(document.getElementById(from2).value/childRate1))*convertRate;if(total>0){document.getElementById(to1).value=parseInt(total,10);document.getElementById(to2).value=parseInt((total-parseInt(total,10))*childRate2,10);this.hideError();}else{this.displayError('Ensure you are only trying to convert numbers in this tool.');}},roastTimer:{meatMatrix:{turkey:[500,20,'200C/fan 180c/gas 6 for first 20 mins.',' Then 180C/fan 160C/gas 4 for next #.'],beef_rare:[450,20,'180C/gas 4',' for #.'],beef_medium:[450,25,'180C/gas 5',' for #.'],beef_well_done:[450,30,'180C/gas 6',' for #.'],lamb_rare:[450,20,'180C/gas 4',' for #.'],lamb_medium:[450,25,'180C/gas 5',' for #.'],lamb_well_done:[450,30,'180C/gas 6',' for #.'],venison_rare:[450,20,'180C/gas 4',' for #.'],venison_medium:[450,25,'180C/gas 5',' for #.'],venison_well_done:[450,30,'180C/gas 6',' for #.'],pork:[450,35,'180C/gas 6',' for #.'],chicken:[500,20,'200C/fan 180c/gas 6 for first 20 mins.',' Then 180C/fan 160C/gas 4 for next #.'],goose:[500,20,'220C/fan 200C/gas 7 for first 20 mins. ',' Then 180C/fan 160C/gas 4 for next #.'],duck:[500,20,'220C/fan 200C/gas 7 for first 20 mins.',' Then 180C/fan 160C/gas 4 for next for #.']},getRoastDetails:function(roast_type,gms){var multiple_time=gms / this.meatMatrix[roast_type][0],description=this.meatMatrix[roast_type][2];if(multiple_time>=1&&this.meatMatrix[roast_type][3]!==undefined){var total_mins=Math.floor((multiple_time*this.meatMatrix[roast_type][1])),time_str='',hours=Math.floor(total_mins / 60),mins=total_mins%60;if(hours>0){if(hours===1){time_str=hours+' hour';}
else{time_str=hours+' hours';}}
if(mins>0){if(mins===1){time_str=time_str+' '+mins+' min';}
else{time_str=time_str+' '+mins+' mins';}}
description+=this.meatMatrix[roast_type][3].replace('#',(time_str));}
return description;},getRoastDetailsLbs:function(roast_type,lbs,oz){var gms=GF.Tools.weightConversions.kgToGm(GF.Tools.weightConversions.lbsOzToKg(lbs,oz));return this.getRoastDetails(roast_type,gms);},setup:function(){$('#roast-table').hide();$('#roast-timer').append('<form method="post" action="" class="roast-timer">'+'<fieldset class="well tail tail-large info-box bg-beige-dark">'+'<label class="description" for="roast_type">Meat type</label>'+'<select id="roast_type" name="roast_type">'+'    <option value="" selected="selected"></option>'+'    <option value="beef_rare" >Beef (rare)</option>'+'    <option value="beef_medium" >Beef (medium)</option>'+'    <option value="beef_well_done">Beef (well done)</option>'+'    <option value="chicken">Chicken</option>'+'    <option value="duck">Duck</option>'+'    <option value="goose">Goose</option>'+'    <option value="lamb_rare">Lamb (rare)</option>'+'    <option value="lamb_medium">Lamb (medium)</option>'+'    <option value="lamb_well_done">Lamb (well done)</option>'+'    <option value="pork">Pork</option>'+'    <option value="turkey">Turkey</option>'+'    <option value="venison_rare">Venison (rare)</option>'+'    <option value="venison_medium">Venison (medium)</option>'+'    <option value="venison_well_done">Venison (well done)</option>'+'</select>'+'<div class="timer-options">'+'  <div id="metric-container" class="convertor-col">'+'    <label for="kg">kg</label>'+'    <input id="kg" name="kg" type="text" maxlength="10" value="" />'+'  </div>'+'  <div class="subtext"><p>or</p></div>'+'  <div class="convertor-col">'+'    <label for="lbs" id="lbs-label">lbs</label>'+'    <input id="lbs" name="lbs" type="text" maxlength="10" value="" /> '+'  </div>'+'  <div class="convertor-col">'+'    <label for="oz" id="oz-label">oz</label>'+'    <input id="oz" name="oz" type="text" maxlength="10" value="" /> '+'  </div>'+'</div>'+'<input id="calculate-roast" class="btn btn--default" type="submit" name="go" value="Calculate" />'+'</fieldset>'+'</form>'+'<h2>Result</h2>'+'<div id="roast-calculator-results" class="well info-box bg-beige-dark"></div>');this.setBindings();},setBindings:function(){$('#kg').focus(function(){$('#lbs').val('');$('#oz').val('');});$('#lbs').focus(function(){$('#kg').val('');});$('#oz').focus(function(){$('#kg').val('');});$('#calculate-roast').on('click',function(e){e.preventDefault();var result;if($('#roast_type').val()){var roast_type=$('#roast_type').val();if($('#kg').val()!==''&&!(isNaN($('#kg').val()))){if($('#kg').val()<=10){result=GF.Tools.roastTimer.getRoastDetails(roast_type,$('#kg').val()*1000);}else{result='Please enter a value less than 11 kilos. If you mean grams, use a decimal e.g. 0.500 for half a kilo';}}else if($('#lbs').val()!==''&&!(isNaN($('#lbs').val()))){if($('#oz').val()===''||(isNaN($('#oz').val()))){$('#oz').val('0');}
if($('#lbs').val()<=22){result=GF.Tools.roastTimer.getRoastDetailsLbs(roast_type,$('#lbs').val(),$('#oz').val());}else{result='Please enter a value less than 22 lbs';}}else{result='Please enter either kg or lbs and oz';}}else{result='Please select a meat type';}
$('#roast-calculator-results').text(result);});}},checkActiveInputs:function(form){var activeState=form.find('input[type="radio"]:checked'),weightType=activeState[0].value,$formInputs=form.find('.convertor-col');$formInputs.children('input').removeAttr('disabled').end().not('[data-type="'+weightType+'"]').children('input').attr('disabled','true');},displayError:function(msg){var activeForm=$(this.activeForm),currentError=activeForm.find('.alert');if(currentError.length===0){activeForm.append('<p class="alert alert-error">'+msg+'</p>').find('.alert').hide().slideDown();}else{currentError.html(msg);}},hideError:function(){var activeForm=$(this.activeForm),currentError=activeForm.find('.alert');if(currentError.length>0){currentError.slideUp();}},weightConversions:{gmToOz:function(gram){return gram*0.0352739619;},gmToLbs:function(gram){var total=gram*0.00220462262184878;return total.toFixed(4);},gmToKg:function(gram){return gram / 1000;},kgToGm:function(kilo){return kilo*1000;},ozToLbs:function(oz){return oz / 16;},ozToGm:function(oz){return oz*28.3495231;},lbsToGm:function(lbs){return lbs*453.59237;},lbsToOz:function(lbs){return lbs*16;},lbsOzToKg:function(lbs,oz){return Math.round((this.gmToKg(this.lbsToGm(lbs)+this.ozToGm(oz)))*100)/ 100;},kgToLbsOzDec:function(kg){var result=Number(this.gmToLbs(kg*1000));return result.toFixed(2);},kgToLbsOzString:function(kg){var lbs=Number(this.gmToLbs(kg*1000)),oz=(lbs%1);oz=this.lbsToOz(oz.toFixed(2));lbs=Math.floor(lbs);return lbs+'lbs '+oz.toFixed(2)+'oz';}}};GF.Tools.init();})(jQuery);(function($){'use strict';Drupal.behaviors.gfTooltip={attach:function(context){$('[data-tooltip-text], [data-tooltip-content]',context).once('tooltip',function(){var $this=$(this);$this.gfTooltip();});}};})(jQuery);